<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE | ENERGY BOOST EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;700;900&display=swap');
        
        :root { --primary: #00ffa3; --energy: #fbbf24; --bg: #000; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; user-select: none; }
        body { background: var(--bg); color: #fff; overflow: hidden; height: 100vh; position: fixed; width: 100%; }

        /* Sayfa Yapısı */
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px 20px 140px; }
        .page.active { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Koala & Enerji Modu */
        .koala-container { position: relative; width: 280px; height: 280px; margin: 20px auto; }
        .koala-main { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 8px solid #111; transition: transform 0.05s; }
        .koala-main:active { transform: scale(0.92); }
        
        /* Enerji Modu Aktifken */
        .energy-mode .koala-main { border-color: var(--energy); box-shadow: 0 0 30px rgba(251, 191, 36, 0.4); }
        .energy-mode::after { content: 'ŞARJ EDİLİYOR'; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); color: var(--energy); font-weight: 900; font-size: 10px; letter-spacing: 3px; }

        /* Barlar */
        .bar-wrap { width: 100%; background: #111; height: 10px; border-radius: 10px; overflow: hidden; border: 1px solid #222; }
        #energy-fill { height: 100%; background: var(--energy); width: 100%; transition: width 0.2s; }
        #xp-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.5s; }

        /* Yüzen İkonlar */
        .float-ico { position: absolute; pointer-events: none; animation: floatUp 0.6s ease-out forwards; font-weight: 900; font-family: 'Orbitron'; z-index: 5000; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }

        /* Alt Nav */
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 90px; background: rgba(10,10,10,0.95); display: grid; grid-template-columns: repeat(4, 1fr); border-top: 1px solid #222; padding-bottom: 20px; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; font-size: 10px; font-weight: 700; text-transform: uppercase; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        /* Cam Kart */
        .glass-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 24px; padding: 16px; margin-bottom: 12px; }
    </style>
</head>
<body>

    <div id="app">
        <div id="p-mine" class="page active">
            <div class="flex justify-between items-center mb-6">
                <div class="flex flex-col">
                    <span class="text-[9px] font-black text-zinc-500 tracking-widest uppercase">Enerji Durumu</span>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-bolt text-amber-400 text-xs"></i>
                        <span id="e-val" class="font-black text-sm uppercase">1000 / 1000</span>
                    </div>
                </div>
                <button onclick="toggleEnergyMode()" id="mode-btn" class="bg-amber-500/10 text-amber-500 px-4 py-2 rounded-full text-[10px] font-black uppercase border border-amber-500/20">
                    Enerji Topla
                </button>
            </div>

            <div class="text-center mt-4">
                <p class="text-zinc-500 font-black text-[10px] uppercase tracking-[0.4em] mb-1">Toplam Bakiye</p>
                <h1 id="bal" class="text-6xl font-black tracking-tighter italic mb-8">0</h1>

                <div class="koala-container" id="koala-btn">
                    <img src="coinkoala.jpg" class="koala-main">
                </div>

                <div class="max-w-[280px] mx-auto mt-10">
                    <div class="bar-wrap mb-4">
                        <div id="energy-fill"></div>
                    </div>
                    <p id="status-msg" class="text-[9px] font-bold text-zinc-600 uppercase">Koala Madencilik Yapıyor...</p>
                </div>
            </div>
        </div>

        <div id="p-market" class="page">
            <h2 class="text-3xl font-black italic mb-6 uppercase tracking-tighter">Geliştirmeler</h2>
            
            <div class="glass-card flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-amber-500/10 rounded-2xl flex items-center justify-center text-amber-500"><i class="fa-solid fa-battery-three-quarters text-xl"></i></div>
                    <div>
                        <p class="text-sm font-bold">Enerji Deposu</p>
                        <p class="text-[10px] text-zinc-500">Maksimum enerjiyi +500 artırır.</p>
                    </div>
                </div>
                <button onclick="upgrade('limit')" id="cost-limit" class="bg-white text-black px-4 py-2 rounded-xl text-[10px] font-black uppercase">5,000</button>
            </div>

            <div class="glass-card flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400"><i class="fa-solid fa-gauge-high text-xl"></i></div>
                    <div>
                        <p class="text-sm font-bold">Hızlı Şarj</p>
                        <p class="text-[10px] text-zinc-500">Tık başına enerji dolumunu artırır.</p>
                    </div>
                </div>
                <button onclick="upgrade('recharge')" id="cost-recharge" class="bg-white text-black px-4 py-2 rounded-xl text-[10px] font-black uppercase">2,500</button>
            </div>
        </div>

        <div id="p-crew" class="page">
            <h2 class="text-3xl font-black italic mb-6 uppercase tracking-tighter">Ekibin</h2>
            <div class="glass-card text-center py-10">
                <p class="text-zinc-500 text-xs font-bold uppercase mb-4 italic">Arkadaşlarını davet ederek %10 bonus kazan!</p>
                <button class="bg-primary text-black px-8 py-4 rounded-2xl font-black uppercase text-xs">Davet Linkini Kopyala</button>
            </div>
        </div>

        <div id="p-drop" class="page">
            <h2 class="text-3xl font-black italic mb-6 uppercase tracking-tighter">Airdrop</h2>
            <div class="glass-card border-l-4 border-primary">
                <p class="text-zinc-500 text-[10px] font-bold uppercase mb-1">USDT Ödül Havuzu</p>
                <h3 class="text-4xl font-black text-primary">50,000 USDT</h3>
            </div>
            <div class="mt-6 glass-card">
                <p class="text-xs font-bold mb-4">TON Cüzdan Adresi</p>
                <input type="text" class="w-full bg-black border border-zinc-800 p-4 rounded-xl text-xs mb-4" placeholder="UQ... adresini gir">
                <button class="w-full bg-white text-black p-4 rounded-xl font-black uppercase text-xs">Cüzdanı Kaydet</button>
            </div>
        </div>

        <nav class="nav-bar">
            <div class="nav-item active" onclick="nav('mine', this)"><i class="fa-solid fa-gamepad"></i><span>Oyna</span></div>
            <div class="nav-item" onclick="nav('market', this)"><i class="fa-solid fa-shop"></i><span>Market</span></div>
            <div class="nav-item" onclick="nav('crew', this)"><i class="fa-solid fa-users"></i><span>Ekip</span></div>
            <div class="nav-item" onclick="nav('drop', this)"><i class="fa-solid fa-parachute-box"></i><span>Airdrop</span></div>
        </nav>
    </div>

    <script>
        // --- OYUN VERİLERİ ---
        let state = {
            bal: parseInt(localStorage.getItem('k_bal')) || 0,
            energy: parseInt(localStorage.getItem('k_energy')) || 1000,
            maxE: parseInt(localStorage.getItem('k_maxE')) || 1000,
            rechargePower: parseInt(localStorage.getItem('k_rch')) || 2, // Enerji toplama hızı
            mode: 'MINE' // MINE veya ENERGY
        };

        const BTN = document.getElementById('koala-btn');

        // --- MOD DEĞİŞTİRME ---
        function toggleEnergyMode() {
            const btn = document.getElementById('mode-btn');
            const container = document.getElementById('koala-btn');
            
            if(state.mode === 'MINE') {
                state.mode = 'ENERGY';
                btn.innerText = 'Madenciliğe Dön';
                btn.classList.replace('bg-amber-500/10', 'bg-blue-500/10');
                btn.classList.replace('text-amber-500', 'text-blue-500');
                container.classList.add('energy-mode');
                document.getElementById('status-msg').innerText = 'Enerji Depolanıyor...';
            } else {
                state.mode = 'MINE';
                btn.innerText = 'Enerji Topla';
                btn.classList.replace('bg-blue-500/10', 'bg-amber-500/10');
                btn.classList.replace('text-blue-500', 'text-amber-500');
                container.classList.remove('energy-mode');
                document.getElementById('status-msg').innerText = 'Koala Madencilik Yapıyor...';
            }
        }

        // --- TIKLAMA YÖNETİMİ ---
        BTN.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.changedTouches[0];
            
            if(state.mode === 'MINE') {
                if(state.energy >= 1) {
                    state.bal += 1;
                    state.energy -= 1;
                    showFloat(touch.clientX, touch.clientY, '+1', '#fff');
                } else {
                    alert("Enerji bitti! Enerji Topla moduna geç.");
                }
            } else {
                // ENERGY TOPLAMA MODU
                if(state.energy < state.maxE) {
                    state.energy = Math.min(state.maxE, state.energy + state.rechargePower);
                    showFloat(touch.clientX, touch.clientY, `+${state.rechargePower}⚡`, '#fbbf24');
                }
            }
            updateUI();
            save();
        });

        // --- GELİŞTİRMELER ---
        function upgrade(type) {
            if(type === 'limit' && state.bal >= 5000) {
                state.bal -= 5000;
                state.maxE += 500;
                alert("Depo Büyütüldü!");
            } else if(type === 'recharge' && state.bal >= 2500) {
                state.bal -= 2500;
                state.rechargePower += 2;
                alert("Şarj Hızı Artırıldı!");
            }
            updateUI();
            save();
        }

        // --- UI & SİSTEM ---
        function updateUI() {
            document.getElementById('bal').innerText = state.bal.toLocaleString();
            document.getElementById('e-val').innerText = `${Math.floor(state.energy)} / ${state.maxE}`;
            document.getElementById('energy-fill').style.width = (state.energy / state.maxE * 100) + "%";
            
            // Market Fiyatları (Basit tutuldu)
            document.getElementById('cost-limit').innerText = "5,000";
            document.getElementById('cost-recharge').innerText = "2,500";
        }

        function showFloat(x, y, txt, color) {
            const el = document.createElement('div');
            el.className = 'float-ico';
            el.innerText = txt;
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            el.style.color = color;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 600);
        }

        function nav(page, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('p-' + page).classList.add('active');
            el.classList.add('active');
        }

        function save() {
            localStorage.setItem('k_bal', state.bal);
            localStorage.setItem('k_energy', state.energy);
            localStorage.setItem('k_maxE', state.maxE);
            localStorage.setItem('k_rch', state.rechargePower);
        }

        window.onload = updateUI;
    </script>
</body>
</html>
