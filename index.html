<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE - SUPREME EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        
        /* CSS Deƒüi≈ükenleri ve Temel Ayarlar */
        :root {
            --bg: #000; --card: #0d0d0d; --text: #fff; --dim: #888;
            --ton-blue: #0098ea; --success: #22c55e;
        }

        body {
            background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif;
            margin: 0; padding: 0; overflow: hidden; height: 100vh;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        /* --- 1. MODAL VE OVERLAY Sƒ∞STEMLERƒ∞ --- */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 5000;
            display: none; align-items: flex-end; backdrop-filter: blur(8px);
        }
        .bottom-sheet {
            width: 100%; background: #1c1c1e; border-top-left-radius: 24px; border-top-right-radius: 24px;
            padding: 20px 20px 40px; transform: translateY(100%); transition: 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .bottom-sheet.show { transform: translateY(0); }

        /* --- 2. SAYFA Y√ñNETƒ∞Mƒ∞ --- */
        .view-container { height: 100vh; display: flex; flex-direction: column; }
        .page { display: none; height: 100%; overflow-y: auto; padding: 20px 20px 140px; }
        .page.active { display: flex; flex-direction: column; animation: fadeIn 0.4s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- 3. ANALƒ∞Z VE SPLASH --- */
        #splash { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .loading-line { width: 220px; height: 3px; background: #111; border-radius: 10px; overflow: hidden; margin-top: 40px; }
        #loading-progress { width: 0%; height: 100%; background: #fff; box-shadow: 0 0 15px #fff; }

        /* --- 4. GAME ENGINE UI --- */
        #game-canvas-wrap { display: none; position: fixed; inset: 0; background: #000; z-index: 4000; }
        #game-ui { position: absolute; top: 40px; width: 100%; display: flex; justify-content: space-between; padding: 0 20px; pointer-events: none; }

        /* --- 5. √ñZEL Bƒ∞LE≈ûENLER --- */
        .action-card { background: var(--card); border: 1px solid #1a1a1a; border-radius: 20px; padding: 16px; margin-bottom: 12px; transition: 0.2s; }
        .action-card:active { transform: scale(0.97); background: #151515; }
        .dogs-btn { background: #fff; color: #000; font-weight: 900; border-radius: 16px; padding: 18px; text-align: center; cursor: pointer; }
        
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.9); border-top: 1px solid #111; display: grid; grid-template-columns: repeat(4, 1fr); padding: 15px 0 35px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #444; font-size: 10px; font-weight: 800; gap: 4px; }
        .nav-item.active { color: #fff; }

        #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: #fff; color: #000; padding: 12px 24px; border-radius: 50px; font-weight: 900; z-index: 10000; transition: 0.4s; }
    </style>
</head>
<body>

    <div id="toast">Notif</div>

    <div id="splash">
        <img src="babykoalas.jpg" class="w-64 h-64 rounded-[40px] mb-8 shadow-2xl">
        <div id="status-logs" class="w-64 space-y-2 mb-8">
            <div class="flex justify-between text-xs font-bold opacity-0 log-entry"><span>Check Profile</span><span class="text-green-500">OK</span></div>
            <div class="flex justify-between text-xs font-bold opacity-0 log-entry"><span>Wallet Status</span><span class="text-green-500">OK</span></div>
            <div class="flex justify-between text-xs font-bold opacity-0 log-entry"><span>Calculating OG</span><span class="text-green-500">DONE</span></div>
        </div>
        <div class="loading-line"><div id="loading-progress"></div></div>
    </div>

    <div id="wallet-modal" class="modal-overlay" onclick="toggleModal('wallet-modal', false)">
        <div class="bottom-sheet" onclick="event.stopPropagation()">
            <div class="flex justify-between mb-8"><h3 class="text-xl font-black">Link Wallet</h3><i class="fa-solid fa-xmark text-zinc-600" onclick="toggleModal('wallet-modal', false)"></i></div>
            <div class="space-y-3">
                <div class="flex items-center bg-[#2c2c2e] p-4 rounded-2xl" onclick="connectWallet('Telegram Wallet', 'https://cryptologos.cc/logos/telegram-messenger-logo.png')">
                    <img src="https://cryptologos.cc/logos/telegram-messenger-logo.png" class="w-10 h-10 mr-4">
                    <span class="flex-1 font-black">Wallet on Telegram</span>
                    <span class="text-[9px] bg-blue-600 px-2 py-1 rounded font-black uppercase">Official</span>
                </div>
                <div class="flex items-center bg-[#2c2c2e] p-4 rounded-2xl" onclick="connectWallet('Tonkeeper', 'https://tonkeeper.com/assets/img/tonkeeper_logo.png')">
                    <img src="https://tonkeeper.com/assets/img/tonkeeper_logo.png" class="w-10 h-10 mr-4">
                    <span class="font-black">Tonkeeper</span>
                </div>
            </div>
        </div>
    </div>

    <div id="main-view" class="view-container hidden">
        
        <div id="page-home" class="page active">
            <div class="text-center py-10">
                <img src="coinkoala.jpg" class="w-24 h-24 rounded-full mx-auto border-2 border-zinc-800 object-cover mb-4">
                <div id="user-balance" class="text-5xl font-black tracking-tighter">0</div>
                <p class="text-zinc-500 font-black text-[10px] uppercase tracking-widest mt-2">Current Koala Tokens</p>
            </div>
            
            <h3 class="text-[10px] font-black text-zinc-600 uppercase tracking-widest mb-4">OG Statistics</h3>
            <div class="grid grid-cols-2 gap-3 mb-8">
                <div class="action-card text-center"><div class="text-xs text-zinc-500 font-bold mb-1">Status</div><div class="font-black text-blue-500">LEGEND</div></div>
                <div class="action-card text-center"><div class="text-xs text-zinc-500 font-bold mb-1">Rank</div><div class="font-black">#1024</div></div>
            </div>

            <h3 class="text-[10px] font-black text-zinc-600 uppercase tracking-widest mb-4">Daily Missions</h3>
            <div class="action-card flex items-center justify-between" onclick="claimTask('tg')">
                <div class="flex items-center gap-3"><i class="fa-brands fa-telegram text-blue-500 text-2xl"></i><span class="font-black text-sm">Join Group</span></div>
                <div id="tg-reward" class="font-black text-zinc-500">+250</div>
            </div>
        </div>

        <div id="page-games" class="page">
            <h2 class="text-2xl font-black mt-8 mb-6 uppercase tracking-tighter">Koala Arcade</h2>
            <div class="action-card relative overflow-hidden p-0 h-48 flex items-center justify-center" onclick="startGame()">
                <img src="babykoalas.jpg" class="absolute inset-0 w-full h-full object-cover opacity-30">
                <div class="relative z-10 text-center">
                    <div class="text-4xl mb-2">üê®</div>
                    <h4 class="font-black text-xl">KOALA JUMP</h4>
                    <span class="text-[10px] font-black bg-white text-black px-3 py-1 rounded-full uppercase">Play Now</span>
                </div>
            </div>
        </div>

        <div id="page-airdrop" class="page">
            <h2 class="text-2xl font-black mt-8 mb-2 uppercase tracking-tighter">Airdrop Allocation</h2>
            <p class="text-zinc-500 font-bold text-sm mb-10">The $KOALA distribution phase is near.</p>
            
            <div id="wallet-card" class="action-card text-center py-10 bg-gradient-to-b from-[#0d0d0d] to-[#000]">
                <div id="w-icon-box" class="w-16 h-16 bg-zinc-900 rounded-2xl mx-auto mb-6 flex items-center justify-center border border-zinc-800">
                    <i class="fa-solid fa-wallet text-2xl text-zinc-700"></i>
                </div>
                <div id="connected-badge" class="hidden inline-flex items-center gap-2 bg-green-500/10 text-green-500 px-4 py-1 rounded-full text-[10px] font-black border border-green-500/30 mb-4">
                    <i class="fa-solid fa-circle-check"></i> CONNECTED
                </div>
                <h3 id="w-label" class="text-xl font-black mb-1">Verify Wallet</h3>
                <p id="w-detail" class="text-zinc-500 text-xs font-bold px-8 mb-10">Connect your TON wallet to be eligible for the claim.</p>
                <div id="connect-btn" class="dogs-btn w-[80%] mx-auto" onclick="toggleModal('wallet-modal', true)">CONNECT WALLET</div>
                <div id="disconnect-btn" class="hidden text-red-500 font-bold text-xs mt-6" onclick="disconnect()">Disconnect Wallet</div>
            </div>
        </div>

        <div class="nav-bar">
            <div class="nav-item active" onclick="nav('home', this)"><i class="fa-solid fa-house"></i><span>HOME</span></div>
            <div class="nav-item" onclick="nav('games', this)"><i class="fa-solid fa-gamepad"></i><span>GAMES</span></div>
            <div class="nav-item" onclick="nav('airdrop', this)"><i class="fa-solid fa-wallet"></i><span>AIRDROP</span></div>
            <div class="nav-item" onclick="showToast('Coming Soon!')"><i class="fa-solid fa-user-group"></i><span>FRIENDS</span></div>
        </div>
    </div>

    <div id="game-canvas-wrap">
        <div id="game-ui">
            <div class="text-white font-black text-2xl" id="game-score">0</div>
            <div class="text-white font-black text-xl" onclick="stopGame()">QUIT</div>
        </div>
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        // --- 1. STATE MANAGEMENT ---
        let state = {
            balance: 0,
            wallet: { connected: false, name: '', logo: '' },
            tasks: { tg: false }
        };

        // --- 2. BOOTSTRAP ---
        window.addEventListener('load', () => {
            const fill = document.getElementById('loading-progress');
            fill.style.width = '100%';
            fill.style.transition = 'width 4s ease';

            const logs = document.querySelectorAll('.log-entry');
            logs.forEach((l, i) => {
                setTimeout(() => { l.style.opacity = '1'; l.style.transform = 'translateY(0)'; }, 800 * (i + 1));
            });

            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('main-view').classList.remove('hidden');
                state.balance = 2500; // √ñrn. Ba≈ülangƒ±√ß OG puanƒ±
                updateUI();
            }, 4500);
        });

        // --- 3. UI FUNCTIONS ---
        function updateUI() {
            document.getElementById('user-balance').innerText = state.balance.toLocaleString();
        }

        function nav(page, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            el.classList.add('active');
        }

        function toggleModal(id, show) {
            const modal = document.getElementById(id);
            const sheet = modal.querySelector('.bottom-sheet');
            if(show) {
                modal.style.display = 'flex';
                setTimeout(() => sheet.classList.add('show'), 10);
            } else {
                sheet.classList.remove('show');
                setTimeout(() => modal.style.display = 'none', 300);
            }
        }

        // --- 4. WALLET LOGIC ---
        function connectWallet(name, logo) {
            toggleModal('wallet-modal', false);
            showToast("Connecting " + name + "...");
            
            setTimeout(() => {
                state.wallet = { connected: true, name, logo };
                document.getElementById('w-label').innerText = name;
                document.getElementById('w-detail').innerText = "UQ" + Math.random().toString(36).substr(2, 8).toUpperCase() + "...";
                document.getElementById('w-icon-box').innerHTML = `<img src="${logo}" class="w-10 h-10 rounded-lg">`;
                document.getElementById('connect-btn').style.display = 'none';
                document.getElementById('disconnect-btn').classList.remove('hidden');
                document.getElementById('connected-badge').classList.remove('hidden');
                showToast("Wallet Connected!");
            }, 1500);
        }

        function disconnect() {
            state.wallet = { connected: false, name: '', logo: '' };
            location.reload(); // En temiz disconnect
        }

        // --- 5. GAME ENGINE (MINI SIM) ---
        let gameInterval;
        function startGame() {
            document.getElementById('game-canvas-wrap').style.display = 'block';
            let score = 0;
            const scoreEl = document.getElementById('game-score');
            gameInterval = setInterval(() => {
                score += 10;
                scoreEl.innerText = score;
                if(score > 1000) stopGame(true);
            }, 100);
        }

        function stopGame(win = false) {
            clearInterval(gameInterval);
            document.getElementById('game-canvas-wrap').style.display = 'none';
            if(win) {
                state.balance += 500;
                updateUI();
                showToast("Game Won! +500 KOALA");
            }
        }

        function claimTask(id) {
            if(state.tasks[id]) return;
            window.open('https://t.me/KoalasCommunity', '_blank');
            setTimeout(() => {
                state.tasks[id] = true;
                state.balance += 250;
                document.getElementById('tg-reward').innerHTML = '<i class="fa-solid fa-circle-check text-green-500"></i>';
                updateUI();
                showToast("250 $KOALA Claimed!");
            }, 2000);
        }

        function showToast(m) {
            const t = document.getElementById('toast');
            t.innerText = m; t.style.top = "40px";
            setTimeout(() => t.style.top = "-100px", 2500);
        }
    </script>
</body>
</html>
