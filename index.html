<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE | PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; user-select: none; }
        body { background-color: #000; color: #fff; overflow: hidden; height: 100vh; }

        /* --- UI UTILS --- */
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px); }
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px 20px 140px; }
        .page.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- TAP AREA --- */
        .tap-circle { width: 280px; height: 280px; margin: 20px auto; position: relative; }
        .tap-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 8px solid #111; transition: 0.1s; }
        .tap-img:active { transform: scale(0.92); }
        .tap-img.disabled { filter: grayscale(1); opacity: 0.3; pointer-events: none; }

        /* --- NAVIGATION --- */
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 95px; background: #050505; border-top: 1px solid #151515; display: grid; grid-template-columns: repeat(4, 1fr); padding-bottom: 25px; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; font-size: 10px; font-weight: 800; text-transform: uppercase; transition: 0.2s; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        /* --- FLOATING TEXT --- */
        .float-text { position: absolute; color: white; font-weight: 900; font-size: 32px; pointer-events: none; animation: floatUp 0.7s ease-out forwards; z-index: 2000; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-120px); } }

        /* --- ENERGY BAR --- */
        .energy-track { height: 10px; background: #111; border-radius: 20px; overflow: hidden; border: 1px solid #222; }
        #energy-fill { height: 100%; width: 100%; background: linear-gradient(90deg, #fff, #666); transition: 0.2s linear; }

        #ad-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: none; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <div id="ad-overlay">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-zinc-900 border-t-white rounded-full animate-spin mx-auto mb-6"></div>
            <h2 id="ad-timer" class="text-7xl font-black italic">10</h2>
            <p class="text-zinc-500 font-black text-xs mt-4 tracking-widest uppercase">Video Reward Loading</p>
        </div>
    </div>

    <div id="app-container">
        
        <div id="page-earn" class="page active">
            <div class="text-center mt-6">
                <p class="text-zinc-500 font-black text-[10px] uppercase tracking-[0.5em] mb-1">Koala Balance</p>
                <h1 id="bal-text" class="text-6xl font-black tracking-tighter">0</h1>
            </div>

            <div class="tap-circle" onclick="handleTap(event)">
                <img src="coinkoala.jpg" id="tap-target" class="tap-img">
            </div>

            <div class="max-w-[280px] mx-auto">
                <div class="flex justify-between items-center mb-2 px-1">
                    <span class="text-[10px] font-black text-zinc-400 uppercase"><i class="fa-solid fa-bolt text-yellow-500"></i> Energy</span>
                    <span class="text-[10px] font-black" id="energy-text">1000/1000</span>
                </div>
                <div class="energy-track">
                    <div id="energy-fill"></div>
                </div>
                <p class="text-[9px] text-zinc-600 mt-2 text-center uppercase font-bold italic">Full recharge: 24 Hours</p>
            </div>
        </div>

        <div id="page-tasks" class="page">
            <h2 class="text-3xl font-black italic mb-6">QUESTS</h2>
            <div class="space-y-3">
                <div class="glass p-5 rounded-[24px] flex justify-between items-center" onclick="doTelegram()">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 text-xl"><i class="fa-brands fa-telegram"></i></div>
                        <div><p class="font-bold text-sm">Join Community</p><p class="text-[10px] text-zinc-500">+50,000 $KOALA</p></div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-zinc-800"></i>
                </div>
                <div class="glass p-5 rounded-[24px] flex justify-between items-center" onclick="showAd()">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-yellow-500/10 rounded-2xl flex items-center justify-center text-yellow-500 text-xl"><i class="fa-solid fa-play"></i></div>
                        <div><p class="font-bold text-sm">Watch Video</p><p class="text-[10px] text-zinc-500">+1 $KOALA + Bonus</p></div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-zinc-800"></i>
                </div>
            </div>
        </div>

        <div id="page-friends" class="page">
            <div class="text-center mt-10">
                <i class="fa-solid fa-users text-6xl mb-6 text-zinc-800"></i>
                <h2 class="text-3xl font-black italic mb-2">FRIENDS</h2>
                <p class="text-zinc-500 text-sm px-10 mb-8">Invite friends and earn 10% of their earnings!</p>
                <div class="glass p-8 rounded-[30px] border-dashed border-zinc-800">
                    <p class="text-zinc-600 text-[10px] font-black uppercase mb-4">Your Referral Link</p>
                    <button class="w-full bg-white text-black font-black p-4 rounded-2xl text-xs uppercase tracking-widest">Share Invite Link</button>
                </div>
            </div>
        </div>

        <div id="page-drop" class="page">
            <h2 class="text-3xl font-black italic mb-6 text-center mt-6 uppercase">Airdrop</h2>
            <div id="wallet-setup" class="glass p-8 rounded-[35px] text-center border-zinc-800">
                <div class="w-20 h-20 bg-zinc-900 rounded-3xl mx-auto flex items-center justify-center mb-6 border border-zinc-800">
                    <i class="fa-solid fa-wallet text-3xl"></i>
                </div>
                <p class="text-sm font-bold mb-6">Connect your TON wallet to receive rewards.</p>
                <input type="text" id="wallet-addr" class="w-full bg-black border border-zinc-800 p-5 rounded-2xl text-white font-bold text-xs mb-4 outline-none focus:border-white" placeholder="UQ... Wallet Address">
                <button onclick="saveWallet()" class="w-full bg-white text-black p-5 rounded-2xl font-black uppercase text-xs">Link Wallet</button>
            </div>
            <div id="wallet-done" class="hidden glass p-8 rounded-[35px] text-center border-green-900/20">
                <i class="fa-solid fa-circle-check text-5xl text-green-500 mb-4"></i>
                <p id="display-wallet" class="text-zinc-500 text-[10px] font-mono break-all mb-6"></p>
                <button onclick="resetWallet()" class="text-zinc-600 text-[10px] font-black uppercase underline">Change Address</button>
            </div>
        </div>

        <nav class="nav-bar">
            <div class="nav-item active" onclick="tab('earn', this)"><i class="fa-solid fa-coins"></i><span>Earn</span></div>
            <div class="nav-item" onclick="tab('tasks', this)"><i class="fa-solid fa-list-check"></i><span>Tasks</span></div>
            <div class="nav-item" onclick="tab('friends', this)"><i class="fa-solid fa-user-group"></i><span>Friends</span></div>
            <div class="nav-item" onclick="tab('drop', this)"><i class="fa-solid fa-parachute-box"></i><span>Airdrop</span></div>
        </nav>
    </div>

    <script>
        /**
         * ðŸ¨ KOALA ARCADE - CORE LOGIC
         * Energy: 1000 per 24 hours (86400 seconds)
         * Fill Rate: 0.01157 per second
         */

        let state = {
            bal: parseInt(localStorage.getItem('k_bal')) || 0,
            energy: parseFloat(localStorage.getItem('k_energy')) || 1000,
            lastSync: parseInt(localStorage.getItem('k_sync')) || Date.now(),
            wallet: localStorage.getItem('k_wallet') || null,
            adCount: 0
        };

        const MAX_ENERGY = 1000;
        const REFILL_RATE = MAX_ENERGY / 86400; // 1 gÃ¼nde 1000 artÄ±ÅŸ iÃ§in saniyelik oran

        window.onload = () => {
            syncEnergy();
            refreshUI();
            checkWallet();
            setInterval(autoRefill, 1000);
        };

        // --- ENERGY LOGIC ---
        function syncEnergy() {
            let now = Date.now();
            let elapsedSeconds = (now - state.lastSync) / 1000;
            state.energy = Math.min(MAX_ENERGY, state.energy + (elapsedSeconds * REFILL_RATE));
            state.lastSync = now;
        }

        function autoRefill() {
            if (state.energy < MAX_ENERGY) {
                state.energy = Math.min(MAX_ENERGY, state.energy + REFILL_RATE);
                refreshUI();
            }
        }

        function handleTap(e) {
            if (state.energy < 1) return;

            state.energy -= 1;
            state.bal += 1;
            state.adCount += 1;
            state.lastSync = Date.now();

            createFloat(e.clientX, e.clientY);
            refreshUI();

            if (state.adCount >= 10) {
                state.adCount = 0;
                showAd();
            }
        }

        // --- UI FUNCTIONS ---
        function refreshUI() {
            document.getElementById('bal-text').innerText = Math.floor(state.bal).toLocaleString();
            document.getElementById('energy-text').innerText = `${Math.floor(state.energy)}/${MAX_ENERGY}`;
            document.getElementById('energy-fill').style.width = (state.energy / MAX_ENERGY * 100) + "%";
            
            const target = document.getElementById('tap-target');
            if (state.energy < 1) target.classList.add('disabled');
            else target.classList.remove('disabled');

            localStorage.setItem('k_bal', state.bal);
            localStorage.setItem('k_energy', state.energy);
            localStorage.setItem('k_sync', state.lastSync);
        }

        function createFloat(x, y) {
            const div = document.createElement('div');
            div.className = 'float-text';
            div.innerText = '+1';
            div.style.left = x + 'px';
            div.style.top = y + 'px';
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 700);
        }

        function tab(name, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('page-' + name).classList.add('active');
            el.classList.add('active');
        }

        // --- TASKS & AD ---
        function showAd() {
            const over = document.getElementById('ad-overlay');
            const timer = document.getElementById('ad-timer');
            over.style.display = 'flex';
            let sec = 10;
            const iv = setInterval(() => {
                sec--; timer.innerText = sec;
                if (sec <= 0) {
                    clearInterval(iv); over.style.display = 'none';
                    state.bal += 1; refreshUI();
                }
            }, 1000);
        }

        function doTelegram() {
            window.open('https://t.me/KoalasCommunity', '_blank');
            if(localStorage.getItem('k_tg') !== 'done') {
                setTimeout(() => {
                    state.bal += 50000;
                    localStorage.setItem('k_tg', 'done');
                    refreshUI();
                    alert("50,000 $KOALA earned!");
                }, 2000);
            }
        }

        // --- WALLET ---
        function saveWallet() {
            const addr = document.getElementById('wallet-addr').value;
            if(addr.length < 10) return;
            state.wallet = addr;
            localStorage.setItem('k_wallet', addr);
            checkWallet();
        }

        function checkWallet() {
            if(state.wallet) {
                document.getElementById('wallet-setup').classList.add('hidden');
                document.getElementById('wallet-done').classList.remove('hidden');
                document.getElementById('display-wallet').innerText = state.wallet;
            } else {
                document.getElementById('wallet-setup').classList.remove('hidden');
                document.getElementById('wallet-done').classList.add('hidden');
            }
        }
        function resetWallet() { localStorage.removeItem('k_wallet'); state.wallet = null; checkWallet(); }
    </script>
</body>
</html>
