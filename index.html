<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube TR Ultimate - Shorts Scroll</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --bg: #0f0f0f; --text: white; --card-bg: #272727; --yt-red: #ff0000; }
        body { background: var(--bg); color: var(--text); font-family: 'Roboto', sans-serif; margin: 0; overflow: hidden; }

        /* HEADER & SIDEBAR (Sabit) */
        header { height: 56px; padding: 0 16px; display: flex; align-items: center; background: var(--bg); position: fixed; width: 100%; top: 0; z-index: 1000; border-bottom: 1px solid #333; }
        .sidebar { position: fixed; left: 0; top: 56px; width: 240px; height: 100vh; background: var(--bg); border-right: 1px solid #333; padding: 12px; }
        .side-item { padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 20px; transition: 0.2s; }
        .side-item:hover, .side-item.active { background: #3f3f3f; }

        /* CONTENT AREA */
        .main-wrapper { margin-left: 240px; margin-top: 56px; height: calc(100vh - 56px); overflow-y: auto; padding: 20px; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .shorts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .v-card { cursor: pointer; }
        .v-thumb { width: 100%; aspect-ratio: 16/9; border-radius: 12px; background: #222; object-fit: cover; }
        .v-thumb.short { aspect-ratio: 9/16; }

        /* SHORTS SCROLL OVERLAY (KAYDIRMA MANTIĞI BURADA) */
        #shorts-container {
            position: fixed; inset: 0; background: #000; z-index: 3000;
            display: none; overflow-y: scroll; scroll-snap-type: y mandatory;
        }
        .short-slide {
            width: 100vw; height: 100vh;
            scroll-snap-align: start;
            display: flex; justify-content: center; align-items: center;
            position: relative;
        }
        .short-video-wrapper {
            height: 90vh; aspect-ratio: 9/16;
            background: #111; border-radius: 15px; overflow: hidden;
            position: relative; box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        .short-actions {
            position: absolute; right: -60px; bottom: 50px;
            display: flex; flex-direction: column; gap: 20px; align-items: center;
        }
        .action-btn { background: #222; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        #close-shorts { position: fixed; top: 20px; left: 20px; z-index: 3001; cursor: pointer; font-size: 24px; text-shadow: 0 0 10px #000; }
    </style>
</head>
<body>

<header>
    <div style="font-weight:bold; font-size:20px;"><i class="fab fa-youtube" style="color:red"></i> YouTube<sup>TR</sup></div>
</header>

<div class="sidebar">
    <div class="side-item active" onclick="showView('home')"><i class="fas fa-home"></i> Ana Sayfa</div>
    <div class="side-item" onclick="showView('shorts')"><i class="fas fa-bolt"></i> Shorts</div>
</div>

<main class="main-wrapper" id="home-view">
    <h2 id="view-title">Sizin için önerilenler</h2>
    <div id="video-display" class="video-grid"></div>
</main>

<div id="shorts-container" onscroll="handleShortsScroll()">
    <div id="close-shorts" onclick="closeShorts()"><i class="fas fa-arrow-left"></i></div>
    <div id="shorts-list"></div>
</div>

<script>
    const API_KEY = 'AIzaSyDkaygARzpXfIXlozjyppLdXsPoE-mq1gg';
    let shortsQueue = [];
    let isShortsActive = false;

    // 1. Videoları Getir
    async function loadContent(mode) {
        const display = document.getElementById('video-display');
        display.innerHTML = 'Yükleniyor...';
        
        let query = mode === 'shorts' ? "türkçe shorts trend -çocuk" : "türkçe popüler videolar -çocuk";
        let duration = mode === 'shorts' ? "short" : "medium";
        
        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=15&q=${query}&videoDuration=${duration}&type=video&key=${API_KEY}`);
        const data = await res.json();
        
        display.innerHTML = '';
        display.className = mode === 'shorts' ? 'shorts-grid' : 'video-grid';
        
        data.items.forEach((item, index) => {
            const id = item.id.videoId;
            display.innerHTML += `
                <div class="v-card" onclick="${mode === 'shorts' ? `openShortsScroll('${id}', ${index})` : `alert('Uzun video açılıyor...')`}">
                    <img src="${item.snippet.thumbnails.high.url}" class="v-thumb ${mode === 'shorts' ? 'short' : ''}">
                    <div style="margin-top:10px; font-weight:bold;">${item.snippet.title.substring(0,50)}</div>
                </div>`;
            if(mode === 'shorts') shortsQueue.push(id);
        });
    }

    // 2. Shorts Kaydırma Mantığı
    function openShortsScroll(id, startIndex) {
        isShortsActive = true;
        const container = document.getElementById('shorts-container');
        const list = document.getElementById('shorts-list');
        container.style.display = 'block';
        list.innerHTML = '';

        // Tüm videoları kaydırılabilir listeye ekle
        shortsQueue.forEach(vId => {
            list.innerHTML += `
                <div class="short-slide">
                    <div class="short-video-wrapper">
                        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${vId}?autoplay=1&loop=1&playlist=${vId}&controls=0" frameborder="0" allow="autoplay; fullscreen"></iframe>
                        <div class="short-actions">
                            <div class="action-btn"><i class="fas fa-thumbs-up"></i></div>
                            <div class="action-btn"><i class="fas fa-comment"></i></div>
                            <div class="action-btn"><i class="fas fa-share"></i></div>
                        </div>
                    </div>
                </div>`;
        });

        // Tıklanan videoya odaklan
        const slides = document.querySelectorAll('.short-slide');
        slides[startIndex].scrollIntoView();
    }

    function closeShorts() {
        isShortsActive = false;
        document.getElementById('shorts-container').style.display = 'none';
        document.getElementById('shorts-list').innerHTML = ''; // Durdurmak için temizle
    }

    function showView(view) {
        shortsQueue = [];
        loadContent(view);
    }

    // Başlangıç
    loadContent('home');
</script>
</body>
</html>
