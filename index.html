<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE ELITE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://adexora.com/cdn/ads.js?id=1624"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        :root { --bg: #000; --card: #0d0d0d; --border: #1a1a1a; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

        /* --- LOADER --- */
        #loader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .logo-box { width: 100px; height: 100px; border-radius: 30px; overflow: hidden; border: 1px solid var(--border); position: relative; }
        .logo-box img { width: 100%; height: 100%; object-fit: cover; }

        /* --- APP STRUCTURE --- */
        #app { display: none; height: 100%; flex-direction: column; }
        .page { display: none; height: 100%; overflow-y: auto; padding: 20px 20px 160px; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .bal-display { font-size: 48px; font-weight: 900; letter-spacing: -2px; text-align: center; margin: 10px 0; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 24px; padding: 18px; display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }

        /* --- GAME HUB --- */
        .game-grid { display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 10px; }
        .game-card { background: linear-gradient(135deg, #111, #050505); border: 1px solid var(--border); border-radius: 28px; padding: 25px; display: flex; flex-direction: column; align-items: center; text-align: center; transition: 0.2s; }
        .game-card:active { transform: scale(0.96); border-color: #333; }
        .game-icon { width: 60px; height: 60px; background: #1a1a1a; border-radius: 18px; display: flex; align-items: center; justify-content: center; font-size: 28px; margin-bottom: 15px; border: 1px solid #222; }

        /* --- LARGE NAV --- */
        .nav { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px); border-top: 1px solid var(--border); display: grid; grid-template-columns: repeat(3, 1fr); padding: 12px 10px 35px; z-index: 1000; height: 110px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; gap: 8px; transition: 0.2s; }
        .nav-item i { font-size: 28px; } /* İkonlar büyütüldü */
        .nav-item span { font-size: 12px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; }
        .nav-item.active { color: #fff; transform: translateY(-5px); }
        .nav-item.active i { color: #fff; text-shadow: 0 0 15px rgba(255,255,255,0.4); }

        /* GAME UI (TIME ATTACK) */
        #game-screen { display: none; position: fixed; inset: 0; background: #000; z-index: 2000; padding: 40px 20px; flex-direction: column; align-items: center; }
        #timer-display { font-size: 80px; font-weight: 900; margin: 40px 0; font-variant-numeric: tabular-nums; }
        .hidden-timer { color: transparent; text-shadow: 0 0 20px rgba(255,255,255,0.1); }
        .btn-action { width: 100%; padding: 24px; border-radius: 30px; font-weight: 900; font-size: 20px; text-transform: uppercase; }
    </style>
</head>
<body>

    <div id="loader">
        <div class="logo-box"><img src="babykoalas.jpg"></div>
        <p class="text-zinc-600 font-black text-[10px] mt-6 tracking-widest uppercase">Elite Arcade Loading</p>
    </div>

    <div id="app">
        <div id="home" class="page active">
            <div class="text-center py-4">
                <div class="bal-display" id="total-bal">0</div>
                <p class="text-zinc-600 font-black text-[10px] uppercase tracking-[0.4em]">$KOALA BALANCE</p>
            </div>

            <div class="card bg-zinc-900/50 border-dashed border-zinc-700 mt-6" onclick="watchAd()">
                <div class="w-14 h-14 bg-white text-black rounded-2xl flex items-center justify-center text-2xl"><i class="fa-solid fa-bolt"></i></div>
                <div class="flex-1">
                    <p class="font-black text-sm uppercase">Quick Reward</p>
                    <p class="text-zinc-500 text-[10px] font-bold">WATCH AD FOR +10 $KOALA</p>
                </div>
            </div>

            <div id="task-1" class="card mt-2" onclick="verifyTask('task-1', 2500, 'https://t.me/KoalasCommunity')">
                <div class="w-14 h-14 bg-zinc-900 rounded-2xl flex items-center justify-center text-2xl text-sky-400"><i class="fa-brands fa-telegram"></i></div>
                <div class="flex-1">
                    <p class="font-black text-sm uppercase">Join Telegram</p>
                    <p class="text-green-500 text-[10px] font-bold">+2,500 $KOALA</p>
                </div>
                <button class="task-btn bg-white text-black font-black px-5 py-2 rounded-xl text-[10px] uppercase">Start</button>
            </div>
        </div>

        <div id="game-hub" class="page">
            <h2 class="text-3xl font-black italic uppercase text-center mb-6">Arcade Zone</h2>
            
            <div class="game-grid">
                <div class="game-card" onclick="alert('Plinko Coming Soon!')">
                    <div class="game-icon text-orange-500"><i class="fa-solid fa-circle-nodes"></i></div>
                    <h3 class="font-black uppercase text-lg">Plinko</h3>
                    <p class="text-zinc-500 text-[10px] font-bold">DROP THE BALL & WIN</p>
                </div>

                <div class="game-card" onclick="openTimeGame()">
                    <div class="game-icon text-white"><i class="fa-solid fa-clock"></i></div>
                    <h3 class="font-black uppercase text-lg">Time Attack</h3>
                    <p class="text-zinc-500 text-[10px] font-bold">STOP AT 10.00s (2X WIN)</p>
                </div>

                <div class="game-card" onclick="alert('Lucky Spin Coming Soon!')">
                    <div class="game-icon text-purple-500"><i class="fa-solid fa-dharmachakra"></i></div>
                    <h3 class="font-black uppercase text-lg">Lucky Spin</h3>
                    <p class="text-zinc-500 text-[10px] font-bold">TEST YOUR LUCK</p>
                </div>
            </div>
        </div>

        <div id="drop" class="page">
            <h2 class="text-3xl font-black italic uppercase text-center mt-10 mb-6">Airdrop</h2>
            <div class="bg-zinc-900 p-10 rounded-[40px] border border-zinc-800 text-center">
                <i class="fa-solid fa-parachute-box text-6xl mb-6 text-zinc-700"></i>
                <input type="text" id="w-input" class="w-full bg-black border-2 border-zinc-800 rounded-2xl p-5 text-center font-bold mb-6" placeholder="UQ... Wallet">
                <button onclick="saveWallet()" class="w-full bg-white text-black font-black py-5 rounded-2xl uppercase tracking-tighter">Connect Wallet</button>
            </div>
        </div>

        <div id="game-screen">
            <div onclick="closeTimeGame()" class="absolute top-10 left-6 text-2xl"><i class="fa-solid fa-xmark"></i></div>
            <h3 class="text-sm font-black text-zinc-500 uppercase">Target: 10.00 Seconds</h3>
            <div id="timer-display">00.00</div>
            
            <div class="w-full mb-10">
                <p class="text-[10px] font-black text-zinc-500 text-center mb-4 uppercase">Current Bet: <span id="game-bet-val">100</span></p>
                <div class="flex justify-center gap-4 mb-8">
                    <button onclick="adjustBet(-50)" class="w-12 h-12 bg-zinc-900 rounded-full border border-zinc-700">-</button>
                    <button onclick="adjustBet(100)" class="w-12 h-12 bg-zinc-900 rounded-full border border-zinc-700">+</button>
                </div>
                <button id="game-btn" onclick="handleTimeAttack()" class="btn-action bg-white text-black">Start Game</button>
            </div>
            <p id="game-status" class="text-[10px] font-black uppercase tracking-widest text-zinc-600 text-center">Stop at exactly 10.00 to win 2x</p>
        </div>

        <nav class="nav">
            <div class="nav-item active" onclick="nav('home', this)">
                <i class="fa-solid fa-house"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" onclick="nav('game-hub', this)">
                <i class="fa-solid fa-gamepad"></i>
                <span>Game</span>
            </div>
            <div class="nav-item" onclick="nav('drop', this)">
                <i class="fa-solid fa-parachute-box"></i>
                <span>Drop</span>
            </div>
        </nav>
    </div>

    <script>
        let balance = parseInt(localStorage.getItem('k_bal')) || 10000;
        let bet = 100;
        let isPlaying = false;
        let startTime, timerInterval;

        window.onload = () => {
            checkTasks();
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('app').style.display = 'flex';
                syncUI();
            }, 2000);
        };

        // --- AD SYSTEM ---
        function watchAd() {
            window.showAdexora().then(() => {
                balance += 10; syncUI(); haptic('success');
            }).catch(() => alert("Ad not loaded"));
        }

        // --- NAVIGATION ---
        function nav(p, el) {
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));
            document.getElementById(p).classList.add('active');
            el.classList.add('active');
            haptic('light');
        }

        // --- GAME HUB HELPERS ---
        function openTimeGame() { document.getElementById('game-screen').style.display = 'flex'; haptic('medium'); }
        function closeTimeGame() { if(isPlaying) return; document.getElementById('game-screen').style.display = 'none'; }
        
        function adjustBet(a) { 
            if(isPlaying) return;
            bet = Math.max(50, bet + a);
            if(bet > balance) bet = Math.max(50, balance);
            document.getElementById('game-bet-val').innerText = bet;
            haptic('light');
        }

        // --- TIME ATTACK ENGINE ---
        function handleTimeAttack() {
            const btn = document.getElementById('game-btn');
            const display = document.getElementById('timer-display');
            const status = document.getElementById('game-status');

            if(!isPlaying) {
                if(balance < bet) return alert("Not enough $KOALA");
                balance -= bet; syncUI(); isPlaying = true;
                btn.innerText = "STOP!"; btn.className = "btn-action bg-red-600 text-white";
                display.classList.remove('hidden-timer');
                startTime = Date.now();
                timerInterval = setInterval(() => {
                    let elapsed = (Date.now() - startTime) / 1000;
                    display.innerText = elapsed.toFixed(2);
                    if(elapsed > 3.5) display.classList.add('hidden-timer');
                }, 10);
                haptic('medium');
            } else {
                isPlaying = false; clearInterval(timerInterval);
                display.classList.remove('hidden-timer');
                let final = ((Date.now() - startTime) / 1000).toFixed(2);
                display.innerText = final;
                if(final === "10.00") {
                    balance += bet * 2; status.innerText = "JACKPOT! +"+(bet*2); haptic('success');
                } else {
                    status.innerText = "MISSED! YOU LOST."; haptic('error');
                }
                setTimeout(() => {
                    btn.innerText = "Start Game"; btn.className = "btn-action bg-white text-black";
                    status.innerText = "Stop at exactly 10.00 to win 2x";
                }, 3000);
                syncUI();
            }
        }

        // --- TASKS ---
        function verifyTask(id, rew, link) {
            if(localStorage.getItem(id)) return;
            window.open(link, '_blank');
            const btn = document.querySelector(`#${id} .task-btn`);
            btn.innerHTML = `<i class="fa-solid fa-spinner animate-spin"></i>`;
            setTimeout(() => {
                balance += rew; localStorage.setItem(id, 'done');
                document.getElementById(id).style.opacity = "0.5";
                btn.innerText = "Done"; syncUI(); haptic('success');
            }, 5000);
        }

        function checkTasks() {
            if(localStorage.getItem('task-1')) {
                document.getElementById('task-1').style.opacity = "0.5";
                document.querySelector('#task-1 .task-btn').innerText = "Done";
            }
        }

        function syncUI() {
            document.getElementById('total-bal').innerText = balance.toLocaleString();
            localStorage.setItem('k_bal', balance);
        }

        function haptic(t) {
            const h = window.Telegram?.WebApp?.HapticFeedback;
            if(h) h.impactOccurred(t);
        }

        function saveWallet() { alert("Wallet Connected!"); haptic('success'); }
    </script>
</body>
</html>
