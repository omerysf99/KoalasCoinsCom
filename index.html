<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TikTok Infinite - Unique Feed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CSS RESET & CORE STYLES */
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background: #000; color: white; font-family: 'TikTok-Font', sans-serif; }
        
        #videoFeed {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        #videoFeed::-webkit-scrollbar { display: none; }

        .video-wrapper {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            position: relative;
            background: #000;
            display: flex;
            justify-content: center;
        }

        .video-container { width: 100%; height: 100%; max-width: 450px; position: relative; }
        iframe { width: 100%; height: 100%; pointer-events: none; }

        /* UI ELEMENTS */
        .ui-overlay { position: absolute; bottom: 90px; left: 15px; right: 80px; z-index: 10; pointer-events: none; }
        .side-bar { position: absolute; right: 12px; bottom: 120px; display: flex; flex-direction: column; align-items: center; gap: 22px; z-index: 20; }
        
        .action-btn { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .action-btn i { font-size: 32px; filter: drop-shadow(0 0 5px rgba(0,0,0,1)); }
        
        /* ANIMATIONS */
        .rotating-disc {
            width: 48px; height: 48px; border-radius: 50%;
            background: radial-gradient(circle, #333 20%, #000 100%);
            border: 10px solid #1a1a1a;
            animation: spin 3s linear infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .heart-pop {
            position: absolute; color: #ff3b5c; font-size: 80px;
            animation: heartAnim 0.8s ease-out forwards;
            pointer-events: none; z-index: 100;
        }
        @keyframes heartAnim {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1) translateY(-100px); opacity: 0; }
        }

        /* TOP NAVIGATION */
        .tabs { position: fixed; top: 40px; width: 100%; display: flex; justify-content: center; gap: 25px; z-index: 50; font-weight: 700; text-shadow: 0 2px 5px #000; }
        .tab { opacity: 0.6; cursor: pointer; transition: 0.3s; }
        .tab.active { opacity: 1; border-bottom: 3px solid white; }
    </style>
</head>
<body>

    <div class="tabs">
        <div class="tab">Takip Edilen</div>
        <div class="tab active">Sizin Ä°Ã§in</div>
    </div>

    <div id="videoFeed"></div>

    <nav class="fixed bottom-0 w-full bg-black border-t border-zinc-900 flex justify-around items-center py-4 z-50">
        <i class="fas fa-home text-xl"></i>
        <i class="fas fa-compass text-xl text-zinc-500"></i>
        <div class="bg-white text-black px-4 py-1 rounded-lg font-bold text-xl cursor-pointer">+</div>
        <i class="fas fa-comment-dots text-xl text-zinc-500"></i>
        <i class="fas fa-user text-xl text-zinc-500"></i>
    </nav>

    <script>
        // DEVASA VIDEO HAVUZU (Benzersiz iÃ§erikler iÃ§in)
        const masterPool = [
            { id: '7591531252507789368', user: 'istek_ozel', desc: 'Senin videonla baÅŸlÄ±yoruz! âœ¨' },
            { id: 'te6wAKXTito', user: 'trend_dans', desc: '2026 Dans AkÄ±mÄ± ðŸ•º' },
            { id: 'kpaFYhxDFl8', user: 'yunus_can', desc: 'Deniz ve gÃ¼neÅŸ! â˜€ï¸ #tatil' },
            { id: 'AY4dgEwCVyU', user: 'ceren_y', desc: 'Åžampiyonluk geldi! ðŸ¦ #GS' },
            { id: 'kz234YDHU-0', user: 'hit_muzik', desc: 'Ocak 2026 Listesi ðŸŽµ' },
            { id: 'k8eQP7b2LDU', user: 'lyrics_tr', desc: 'Aynur AydÄ±n - Bi Dakika ðŸŽ¤' },
            { id: '3vK7G9mRUXo', user: 'sefler_sofrasi', desc: 'MÃ¼kemmel Yemek Tarifi ðŸ¥˜' },
            { id: 'v2pG0B9uW18', user: 'komedi_saati', desc: 'Sonuna kadar izleyin ðŸ¤£' },
            { id: 'WzxXh3UMBF0', user: 'futbol_tr', desc: 'Gecenin golÃ¼! âš½' },
            { id: 'XsFDTNvMrxM', user: 'ai_art', desc: 'Yapay zeka devrimi ðŸ¤–' },
            { id: 'l40S0r4tP_s', user: 'gezgin_tr', desc: 'Ä°stanbulu geziyoruz ðŸ‡¹ðŸ‡·' },
            { id: 'bi0m3_n4mE1', user: 'tech_lover', desc: 'Yeni Telefon Ä°ncelemesi ðŸ“±' },
            { id: 'z_91jXkM2', user: 'motivasyon', desc: 'GÃ¼ne enerjik baÅŸla! ðŸ’ª' }
        ];

        let watchedVideos = new Set(); // Ä°zlenenleri takip etmek iÃ§in
        let videoCounter = 0;
        const feed = document.getElementById('videoFeed');

        // BENZERSÄ°Z VÄ°DEO SEÃ‡Ä°CÄ°
        function getUniqueVideo() {
            // EÄŸer tÃ¼m havuz izlendiyse, geÃ§miÅŸi temizle ve baÅŸtan baÅŸla
            if (watchedVideos.size >= masterPool.length) {
                watchedVideos.clear();
            }

            let availableVideos = masterPool.filter(v => !watchedVideos.has(v.id));
            let selected = availableVideos[Math.floor(Math.random() * availableVideos.length)];
            
            watchedVideos.add(selected.id); // ArtÄ±k izlendi olarak iÅŸaretle
            return selected;
        }

        // VÄ°DEO KARTI OLUÅžTURUCU
        function appendUniqueVideo() {
            const v = getUniqueVideo();
            const section = document.createElement('div');
            section.className = 'video-wrapper';
            section.innerHTML = `
                <div class="video-container" ondblclick="spawnHeart(event)">
                    <iframe id="player-${videoCounter}" 
                            src="https://www.youtube.com/embed/${v.id}?enablejsapi=1&autoplay=0&controls=0&loop=1&playlist=${v.id}" 
                            frameborder="0" allow="autoplay; encrypted-media"></iframe>
                    
                    <div class="ui-overlay">
                        <h3 class="font-bold text-lg">@${v.user}</h3>
                        <p class="text-sm mt-1 opacity-90">${v.desc}</p>
                        <div class="flex items-center gap-2 mt-4"><i class="fas fa-music text-xs"></i><marquee class="w-32 text-xs">Orijinal Ses - ${v.user}</marquee></div>
                    </div>

                    <div class="side-bar">
                        <img src="https://i.pravatar.cc/100?u=${v.user}" class="w-12 h-12 rounded-full border-2 border-white mb-2">
                        <div class="action-btn" onclick="toggleLike(this)"><i class="fas fa-heart"></i><span class="text-[10px] mt-1 font-bold">45.1K</span></div>
                        <div class="action-btn"><i class="fas fa-comment-dots"></i><span class="text-[10px] mt-1 font-bold">1,210</span></div>
                        <div class="action-btn"><i class="fas fa-share"></i><span class="text-[10px] mt-1 font-bold">PaylaÅŸ</span></div>
                        <div class="rotating-disc mt-4"></div>
                    </div>
                </div>
            `;
            feed.appendChild(section);
            videoCounter++;
            initObserver();
        }

        // KALP ANÄ°MASYONU
        function spawnHeart(e) {
            const heart = document.createElement('i');
            heart.className = 'fas fa-heart heart-pop';
            heart.style.left = (e.clientX - 40) + 'px';
            heart.style.top = (e.clientY - 40) + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 800);
        }

        function toggleLike(el) {
            const icon = el.querySelector('i');
            icon.classList.toggle('text-red-500');
            icon.style.transform = 'scale(1.3)';
            setTimeout(() => icon.style.transform = 'scale(1)', 200);
        }

        // AKILLI OYNATMA (INTERSECTION OBSERVER)
        let observer;
        function initObserver() {
            if (observer) observer.disconnect();
            observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const iframe = entry.target.querySelector('iframe');
                    if (entry.isIntersecting) {
                        iframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                    } else {
                        iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                    }
                });
            }, { threshold: 0.8 });
            document.querySelectorAll('.video-wrapper').forEach(vw => observer.observe(vw));
        }

        // SONSUZ KAYDIRMA TETÄ°KLEYÄ°CÄ°SÄ°
        feed.addEventListener('scroll', () => {
            if (feed.scrollTop + feed.clientHeight >= feed.scrollHeight - 500) {
                appendUniqueVideo();
            }
        });

        // BAÅžLANGIÃ‡: 5 benzersiz video yÃ¼kle
        for(let i=0; i<5; i++) { appendUniqueVideo(); }

    </script>
</body>
</html>
