<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TikTok Pro - Rastgele KeÅŸfet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background: #000; color: white; }
        .feed-wrapper { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; scrollbar-width: none; }
        .feed-wrapper::-webkit-scrollbar { display: none; }
        .video-card { height: 100vh; width: 100%; scroll-snap-align: start; position: relative; background: #000; display: flex; justify-content: center; align-items: center; }
        iframe { width: 100%; height: 100%; max-width: 500px; pointer-events: all; }
        .ui-overlay { position: absolute; bottom: 100px; left: 20px; z-index: 20; pointer-events: none; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); }
        .side-bar { position: absolute; right: 15px; bottom: 120px; display: flex; flex-direction: column; gap: 20px; z-index: 30; }
        .tab-active { border-bottom: 3px solid white; color: white; opacity: 1; }
    </style>
</head>
<body>

    <div class="fixed top-0 left-0 w-full flex justify-center gap-6 z-50 bg-gradient-to-b from-black/80 to-transparent pt-8 pb-4">
        <button onclick="changeCategory('kesfet')" id="tab-kesfet" class="tab-active font-bold">KeÅŸfet</button>
        <button onclick="changeCategory('trend')" id="tab-trend" class="opacity-50 font-bold">Trendler</button>
    </div>

    <div class="feed-wrapper" id="videoFeed"></div>

    <nav class="fixed bottom-0 w-full bg-black border-t border-zinc-900 flex justify-around items-center py-4 z-50">
        <i class="fas fa-home text-xl"></i>
        <i class="fas fa-compass text-xl text-zinc-500"></i>
        <div class="bg-white text-black px-4 py-1 rounded-lg font-bold text-xl">+</div>
        <i class="fas fa-comment-dots text-xl text-zinc-500"></i>
        <i class="fas fa-user text-xl text-zinc-500"></i>
    </nav>

    <script>
        // BÃœYÃœK VÄ°DEO HAVUZU (Buraya istediÄŸin kadar ID ekleyebilirsin)
        const videoPool = [
            { id: '7591531252507789368', user: 'ana_video', desc: 'Senin Ã¶zel seÃ§imin! âœ¨' },
            { id: 'kpaFYhxDFl8', user: 'yunuscanpolat', desc: 'TÃ¼rkiye sahilleri ğŸ˜‚ #bahar' },
            { id: 'AY4dgEwCVyU', user: 'cerenyaldiz', desc: 'Galatasaray her yerde! ğŸ¦' },
            { id: 'kz234YDHU-0', user: 'muzik_tr', desc: 'HaftalÄ±k Top 10 ÅarkÄ± ğŸµ' },
            { id: 'k8eQP7b2LDU', user: 'lyrics_tr', desc: 'Bi Dakika - Aynur AydÄ±n ğŸ¤' },
            { id: 'WzxXh3UMBF0', user: 'spor_aktif', desc: 'Sabah antrenmanÄ±! âš½' },
            { id: '3vK7G9mRUXo', user: 'yemek_tr', desc: 'Harika bir tarif! ğŸ²' },
            { id: 'l40S0r4tP_s', user: 'gezi_rehber', desc: 'Ä°stanbul sokaklarÄ± ğŸ‡¹ğŸ‡·' },
            { id: 'v2pG0B9uW18', user: 'komedi_tr', desc: 'Bunu beklemiyordum! ğŸ¤£' }
        ];

        const feed = document.getElementById('videoFeed');
        let renderedCount = 0;

        // Rastgele Video SeÃ§me Fonksiyonu
        function getRandomVideo() {
            const randomIndex = Math.floor(Math.random() * videoPool.length);
            return videoPool[randomIndex];
        }

        // Yeni Video Ekleme (Her seferinde farklÄ± gelir)
        function appendVideo() {
            const v = getRandomVideo();
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <iframe id="player-${renderedCount}" src="https://www.youtube.com/embed/${v.id}?enablejsapi=1&autoplay=0&controls=0&loop=1&playlist=${v.id}" frameborder="0" allow="autoplay; encrypted-media"></iframe>
                <div class="ui-overlay">
                    <h3 class="font-bold">@${v.user}</h3>
                    <p class="text-sm mt-1">${v.desc}</p>
                </div>
                <div class="side-bar">
                    <div class="flex flex-col items-center"><i class="fas fa-heart text-2xl"></i><span class="text-[10px] mt-1">10K</span></div>
                    <div class="flex flex-col items-center"><i class="fas fa-comment-dots text-2xl"></i><span class="text-[10px] mt-1">800</span></div>
                    <div class="flex flex-col items-center"><i class="fas fa-share text-2xl"></i></div>
                </div>
            `;
            feed.appendChild(card);
            renderedCount++;
            setupObserver(); // Yeni eklenen videoyu izlemeye al
        }

        // Ä°lk baÅŸta 5 tane rastgele video yÃ¼kle
        for(let i=0; i<5; i++) { appendVideo(); }

        // SADECE EKRANDAKÄ° VÄ°DEOYU OYNAT
        function setupObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const iframe = entry.target.querySelector('iframe');
                    if (entry.isIntersecting) {
                        iframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                    } else {
                        iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                    }
                });
            }, { threshold: 0.8 });

            document.querySelectorAll('.video-card').forEach(card => observer.observe(card));
        }

        // KAYDIRINCA YENÄ° VÄ°DEO Ã‡EK (Sonsuz Algoritma)
        feed.addEventListener('scroll', () => {
            // Sona 2 video kala yenilerini ekle ki takÄ±lma olmasÄ±n
            if (feed.scrollTop + feed.clientHeight >= feed.scrollHeight - (window.innerHeight * 2)) {
                appendVideo();
            }
        });

        function changeCategory(cat) {
            alert(cat + " kategorisi iÃ§in videolar karÄ±ÅŸtÄ±rÄ±lÄ±yor...");
            feed.innerHTML = '';
            for(let i=0; i<5; i++) { appendVideo(); }
            feed.scrollTop = 0;
        }
    </script>
</body>
</html>
