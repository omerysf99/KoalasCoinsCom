<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA KOMBAT | TAP TO EARN</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body { 
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            color: #fff; overflow: hidden; height: 100vh; position: fixed; width: 100%;
            font-family: 'Inter', sans-serif;
        }

        /* 3D Coin Efekti */
        .tap-target-wrapper {
            perspective: 1000px;
            margin: 20px auto;
            width: 280px; height: 280px;
        }

        .koala-main-btn {
            width: 100%; height: 100%;
            border-radius: 50%;
            background: linear-gradient(145deg, #2d333b, #0d0d0d);
            border: 10px solid #252a30;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.8), inset 0 0 30px rgba(245, 187, 95, 0.1);
            transition: transform 0.1s cubic-bezier(0.1, 0.7, 0.1, 1);
            position: relative;
        }

        .koala-main-btn img {
            width: 85%; height: 85%; border-radius: 50%; object-fit: cover;
            pointer-events: none; user-select: none;
        }

        /* TÄ±klama anÄ±nda "Squash" (ezilme) efekti */
        .koala-main-btn:active {
            transform: scale(0.92) rotateX(10deg);
        }

        /* UÃ§an Coin SayÄ±larÄ± */
        .floating-value {
            position: absolute; color: #fff; font-size: 36px; font-weight: 900;
            pointer-events: none; z-index: 1000;
            animation: floatUp 0.8s ease-out forwards;
            text-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-160px) scale(1.4); }
        }

        /* Enerji BarÄ± Pro */
        .energy-progress-bg { width: 100%; height: 16px; background: #111; border-radius: 20px; border: 1px solid #2d333b; overflow: hidden; }
        .energy-progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #f5bb5f 0%, #ff8c00 100%);
            width: 100%; transition: width 0.1s linear;
        }

        /* Navigasyon */
        nav { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; 
            background: rgba(13, 13, 13, 0.95); backdrop-filter: blur(10px);
            border-top: 1px solid #2d333b; display: flex; justify-content: space-around;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-tab { color: #555; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; font-size: 10px; font-weight: bold; }
        .nav-tab.active { color: #f5bb5f; }
    </style>
</head>
<body>

    <div class="px-4 py-3 grid grid-cols-3 gap-2 mt-4">
        <div class="bg-[#1c1f24] p-2 rounded-xl border border-[#2d333b] text-center">
            <p class="text-[8px] text-zinc-500 font-bold uppercase">Per Tap</p>
            <p class="text-xs font-black text-yellow-500">+1</p>
        </div>
        <div class="bg-[#1c1f24] p-2 rounded-xl border border-[#2d333b] text-center">
            <p class="text-[8px] text-zinc-500 font-bold uppercase">To Next LVL</p>
            <p class="text-xs font-black text-blue-400">100M</p>
        </div>
        <div class="bg-[#1c1f24] p-2 rounded-xl border border-[#2d333b] text-center">
            <p class="text-[8px] text-zinc-500 font-bold uppercase">Hourly</p>
            <p class="text-xs font-black text-green-500" id="ui-pps">+0</p>
        </div>
    </div>

    <div class="text-center mt-6">
        <div class="flex items-center justify-center gap-3">
            <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" class="w-10 h-10 drop-shadow-[0_0_10px_#26a17b]">
            <h1 id="ui-bal" class="text-5xl font-black italic tracking-tight">0</h1>
        </div>
        <p class="text-[10px] text-zinc-500 font-bold mt-2 tracking-[4px] uppercase">Main Exchange</p>
    </div>

    <div class="tap-target-wrapper">
        <div class="koala-main-btn" id="main-tap-btn">
            <img src="coinkoala.jpg" alt="Koala" id="koala-img">
        </div>
    </div>

    <div class="px-8 mt-10">
        <div class="flex justify-between items-center mb-2">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-bolt text-yellow-400 text-2xl animate-pulse"></i>
                <span id="ui-energy-text" class="text-2xl font-black italic">1000</span>
                <span class="text-zinc-600 font-bold">/ 1000</span>
            </div>
            <button class="bg-zinc-800 text-[10px] px-3 py-1 rounded-full border border-zinc-700 font-bold">ðŸš€ BOOST</button>
        </div>
        <div class="energy-progress-bg">
            <div id="energy-bar" class="energy-progress-fill"></div>
        </div>
    </div>

    <nav>
        <div class="nav-tab active"><i class="fa-solid fa-hand-pointer text-2xl"></i>TAP</div>
        <div class="nav-tab" onclick="tg.showAlert('Mine YakÄ±nda!')"><i class="fa-solid fa-pickaxe text-2xl"></i>MINE</div>
        <div class="nav-tab" onclick="tg.showAlert('Airdrop YakÄ±nda!')"><i class="fa-solid fa-parachute-box text-2xl"></i>AIRDROP</div>
    </nav>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Oyun MantÄ±ÄŸÄ±
    let balance = 0;
    let energy = 1000;
    let maxEnergy = 1000;
    let pps = 0;
    let perTap = 1;

    const btn = document.getElementById('main-tap-btn');
    const balUI = document.getElementById('ui-bal');
    const energyText = document.getElementById('ui-energy-text');
    const energyBar = document.getElementById('energy-bar');

    // TAP EVENT
    btn.addEventListener('touchstart', (e) => {
        e.preventDefault(); // Sayfa kaymasÄ±nÄ± engelle
        
        // Ã‡oklu dokunma desteÄŸi
        for (let i = 0; i < e.changedTouches.length; i++) {
            handleTap(e.changedTouches[i].pageX, e.changedTouches[i].pageY);
        }
    });

    function handleTap(x, y) {
        if (energy < perTap) {
            tg.HapticFeedback.notificationOccurred('error');
            return;
        }

        // DeÄŸerleri GÃ¼ncelle
        balance += perTap;
        energy -= perTap;
        
        // ArayÃ¼zÃ¼ GÃ¼ncelle
        updateUI();

        // GÃ¶rsel Efekt OluÅŸtur (UÃ§an SayÄ±)
        createFloatingText(x, y);

        // Telegram TitreÅŸim
        tg.HapticFeedback.impactOccurred('medium');
    }

    function createFloatingText(x, y) {
        const span = document.createElement('span');
        span.className = 'floating-value';
        span.innerText = `+${perTap}`;
        span.style.left = `${x - 25}px`;
        span.style.top = `${y - 50}px`;
        
        document.body.appendChild(span);
        
        // Animasyon bittiÄŸinde sil
        setTimeout(() => span.remove(), 800);
    }

    function updateUI() {
        balUI.innerText = Math.floor(balance).toLocaleString();
        energyText.innerText = energy;
        const energyWidth = (energy / maxEnergy) * 100;
        energyBar.style.width = energyWidth + "%";
    }

    // Pasif Enerji Dolumu (Saniyede +3)
    setInterval(() => {
        if (energy < maxEnergy) {
            energy = Math.min(maxEnergy, energy + 3);
            updateUI();
        }
    }, 1000);

    window.onload = updateUI;
</script>
</body>
</html>
