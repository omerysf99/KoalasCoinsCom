<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE SUPREME</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        :root { --bg: #000; --card: #0d0d0d; --border: #1a1a1a; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

        /* --- LOADER --- */
        #loader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .logo-box { width: 140px; height: 140px; border-radius: 45px; overflow: hidden; border: 1px solid var(--border); position: relative; }
        .logo-box img { width: 100%; height: 100%; object-fit: cover; }
        .scan { position: absolute; width: 100%; height: 4px; background: #fff; box-shadow: 0 0 15px #fff; animation: scanMove 2s infinite; }
        @keyframes scanMove { 0%, 100% { top: 0; } 50% { top: 100%; } }

        /* --- UI --- */
        #app { display: none; height: 100%; flex-direction: column; }
        .page { display: none; height: 100%; overflow-y: auto; padding: 20px 24px 140px; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .bal-display { font-size: 56px; font-weight: 900; letter-spacing: -2px; margin: 10px 0; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 24px; padding: 18px; display: flex; align-items: center; gap: 15px; margin-bottom: 12px; }
        .task-done { opacity: 0.4; pointer-events: none; filter: grayscale(1); }

        /* --- WHEEL GAME UI --- */
        .wheel-container { position: relative; width: 300px; height: 300px; margin: 20px auto; }
        #wheel { width: 100%; height: 100%; border-radius: 50%; border: 8px solid #1a1a1a; position: relative; overflow: hidden; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); background: #0a0a0a; box-shadow: 0 0 40px rgba(255,255,255,0.05); }
        .pointer { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 30px; height: 40px; background: #fff; clip-path: polygon(50% 100%, 0 0, 100% 0); z-index: 20; filter: drop-shadow(0 5px 10px #000); }
        .slice { position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 14px; color: #444; }
        .wheel-center { position: absolute; inset: 110px; background: #000; border: 4px solid #1a1a1a; border-radius: 50%; z-index: 10; display: flex; align-items: center; justify-content: center; }
        .wheel-center img { width: 60%; height: 60%; object-fit: cover; border-radius: 50%; }

        /* --- NAV --- */
        .nav { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); border-top: 1px solid var(--border); display: grid; grid-template-columns: repeat(3, 1fr); padding: 12px 0 35px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #444; font-size: 10px; font-weight: 900; gap: 5px; text-transform: uppercase; }
        .nav-item.active { color: #fff; }
    </style>
</head>
<body>

    <div id="loader">
        <div class="logo-box"><img src="babykoalas.jpg"><div class="scan"></div></div>
        <p class="text-zinc-600 font-black text-[10px] uppercase tracking-widest mt-6">Loading Koala World...</p>
    </div>

    <div id="app">
        <div id="home" class="page active">
            <div class="text-center py-8">
                <div class="inline-flex items-center gap-2 bg-zinc-900 px-4 py-2 rounded-full border border-zinc-800 mb-4">
                    <img id="cur-ex-img" src="binance.jpg" class="w-4 h-4 rounded-sm">
                    <span id="cur-ex-name" class="text-[10px] font-black uppercase text-zinc-400">Binance</span>
                </div>
                <div class="bal-display" id="total-bal">0</div>
                <p class="text-zinc-600 font-black text-[10px] uppercase tracking-[0.4em]">$KOALA</p>
            </div>

            <div class="grid grid-cols-3 gap-3 mb-8">
                <div class="cursor-pointer text-center p-3 rounded-2xl bg-zinc-900 border border-zinc-800" onclick="setEx('Binance', 'binance.jpg')">
                    <img src="binance.jpg" class="w-7 h-7 mx-auto mb-1 rounded-lg"><span class="text-[9px] font-black">BINANCE</span>
                </div>
                <div class="cursor-pointer text-center p-3 rounded-2xl bg-zinc-900 border border-zinc-800" onclick="setEx('OKX', 'okx.jpg')">
                    <img src="okx.jpg" class="w-7 h-7 mx-auto mb-1 rounded-lg"><span class="text-[9px] font-black">OKX</span>
                </div>
                <div class="cursor-pointer text-center p-3 rounded-2xl bg-zinc-900 border border-zinc-800" onclick="setEx('Bitget', 'bitget.jpg')">
                    <img src="bitget.jpg" class="w-7 h-7 mx-auto mb-1 rounded-lg"><span class="text-[9px] font-black">BITGET</span>
                </div>
            </div>

            <div id="task-comm" class="card" onclick="runTask('task-comm', 500, 'https://t.me/KoalasCommunity')">
                <div class="w-12 h-12 bg-black rounded-2xl flex items-center justify-center border border-zinc-900 text-2xl"><i class="fa-brands fa-telegram text-sky-400"></i></div>
                <div class="flex-1"><p class="font-black text-xs uppercase">Join Community</p><p class="text-zinc-600 text-[10px] font-bold">+500 $KOALA</p></div>
                <span class="task-btn bg-white text-black text-[10px] font-black px-4 py-1.5 rounded-xl uppercase">Start</span>
            </div>
        </div>

        <div id="games" class="page text-center">
            <h2 class="text-2xl font-black italic uppercase mt-4 mb-2 tracking-tighter">Koala Wheel</h2>
            <p class="text-zinc-600 text-[10px] font-black uppercase mb-8 tracking-widest">Spin to win big rewards</p>
            
            <div class="wheel-container">
                <div class="pointer"></div>
                <div class="wheel-center"><img src="coinkoala.jpg"></div>
                <div id="wheel">
                    </div>
            </div>

            <p class="text-zinc-500 font-black text-[10px] mt-6 mb-4 uppercase">Cost: 500 $KOALA per spin</p>
            <button id="spin-btn" onclick="spinWheel()" class="w-full bg-white text-black font-black py-5 rounded-3xl uppercase tracking-tighter shadow-xl shadow-white/5 active:scale-95 transition-all">Spin Now</button>
        </div>

        <div id="airdrop" class="page">
            <h2 class="text-3xl font-black italic uppercase text-center mt-12 mb-8 text-zinc-400">Airdrop</h2>
            <div class="bg-zinc-900 p-8 rounded-[40px] border border-zinc-800 text-center">
                <p class="text-zinc-500 font-bold text-sm mb-6">Listing soon on selected exchanges.</p>
                <input type="text" id="w-input" class="w-full bg-black border-2 border-zinc-800 rounded-2xl p-4 text-center font-bold text-white mb-4" placeholder="TON Wallet Address">
                <button onclick="saveW()" class="w-full bg-zinc-800 text-zinc-400 font-black py-5 rounded-2xl uppercase">Connect</button>
            </div>
        </div>

        <div class="nav">
            <div class="nav-item active" onclick="nav('home', this)"><i class="fa-solid fa-house"></i><span>Home</span></div>
            <div class="nav-item" onclick="nav('games', this)"><i class="fa-solid fa-circle-notch"></i><span>Wheel</span></div>
            <div class="nav-item" onclick="nav('airdrop', this)"><i class="fa-solid fa-parachute-box"></i><span>Drop</span></div>
        </div>
    </div>

    <script>
        let balance = parseInt(localStorage.getItem('k_bal')) || 6500;
        let isSpinning = false;
        const slices = [
            { label: "100", val: 100, color: "#111" },
            { label: "1000", val: 1000, color: "#1a1a1a" },
            { label: "50", val: 50, color: "#111" },
            { label: "JACKPOT", val: 5000, color: "#fff", text: "#000" },
            { label: "200", val: 200, color: "#111" },
            { label: "500", val: 500, color: "#1a1a1a" },
            { label: "10", val: 10, color: "#111" },
            { label: "2000", val: 2000, color: "#1a1a1a" }
        ];

        window.onload = () => {
            initWheel();
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('app').style.display = 'flex';
                syncUI();
            }, 2500);
        };

        function initWheel() {
            const wheel = document.getElementById('wheel');
            slices.forEach((s, i) => {
                const div = document.createElement('div');
                div.className = 'slice';
                div.style.transform = `rotate(${i * 45}deg) skewY(-45deg)`;
                div.style.background = s.color;
                div.innerHTML = `<span style="transform: skewY(45deg) rotate(22.5deg); color: ${s.text || '#666'}">${s.label}</span>`;
                wheel.appendChild(div);
            });
        }

        function spinWheel() {
            if (isSpinning) return;
            if (balance < 500) return showUI("Need 500 $KOALA to spin!");

            isSpinning = true;
            balance -= 500;
            syncUI();
            haptic('medium');

            const randomDeg = Math.floor(3000 + Math.random() * 3000);
            const wheel = document.getElementById('wheel');
            wheel.style.transform = `rotate(${randomDeg}deg)`;

            setTimeout(() => {
                isSpinning = false;
                const actualDeg = randomDeg % 360;
                const sliceIndex = Math.floor(((360 - actualDeg + 22.5) % 360) / 45);
                const win = slices[sliceIndex];

                balance += win.val;
                syncUI();
                haptic('success');
                showUI(`YOU WON ${win.val} $KOALA!`);
                wheel.style.transition = 'none';
                wheel.style.transform = `rotate(${actualDeg}deg)`;
                setTimeout(() => wheel.style.transition = 'transform 4s cubic-bezier(0.15, 0, 0.15, 1)', 50);
            }, 4100);
        }

        function runTask(id, rew, link) {
            if(localStorage.getItem(id)) return;
            window.open(link, '_blank');
            const btn = document.querySelector(`#${id} .task-btn`);
            btn.innerText = "Verifying...";
            setTimeout(() => {
                balance += rew;
                localStorage.setItem(id, 'done');
                document.getElementById(id).classList.add('task-done');
                btn.innerHTML = '<i class="fa-solid fa-check"></i>';
                syncUI(); haptic('success');
            }, 5000);
        }

        function syncUI() {
            document.getElementById('total-bal').innerText = balance.toLocaleString();
            localStorage.setItem('k_bal', balance);
        }

        function showUI(msg) {
            if(window.Telegram?.WebApp?.showAlert) window.Telegram.WebApp.showAlert(msg);
            else alert(msg);
        }

        function setEx(n, i) {
            document.getElementById('cur-ex-name').innerText = n;
            document.getElementById('cur-ex-img').src = i;
            haptic('light');
        }

        function nav(p, el) {
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));
            document.getElementById(p).classList.add('active'); el.classList.add('active');
            haptic('light');
        }

        function haptic(t) {
            const h = window.Telegram?.WebApp?.HapticFeedback;
            if(!h) return;
            if(t === 'light') h.impactOccurred('light');
            if(t === 'medium') h.impactOccurred('medium');
            if(t === 'success') h.notificationOccurred('success');
        }
    </script>
</body>
</html>
