<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reels Pro - Yorum Panelli</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #0b0b0b;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; font-family: 'Segoe UI', sans-serif; color: white;
            overflow: hidden;
        }

        .reels-wrapper {
            width: 100%; max-width: 380px; height: 90vh;
            position: relative; background: #000;
            border-radius: 40px; overflow: hidden; border: 6px solid #222;
        }

        .reels-container {
            height: 100%; overflow-y: scroll;
            scroll-snap-type: y mandatory; scroll-behavior: smooth;
        }
        .reels-container::-webkit-scrollbar { display: none; }

        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* Yan Men√º */
        .side-bar {
            position: absolute; right: 10px; bottom: 80px;
            display: flex; flex-direction: column; align-items: center;
            gap: 15px; z-index: 10;
        }
        .action-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .icon { font-size: 26px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.8)); }
        .count { font-size: 11px; font-weight: bold; margin-top: 2px; }

        /* Yorum Paneli (Bottom Sheet) */
        .comment-panel {
            position: absolute; bottom: -100%; left: 0;
            width: 100%; height: 60%; background: #1a1a1a;
            border-top-left-radius: 20px; border-top-right-radius: 20px;
            z-index: 200; transition: bottom 0.3s ease;
            display: flex; flex-direction: column;
        }
        .comment-panel.active { bottom: 0; }

        .comment-header {
            padding: 15px; text-align: center; border-bottom: 1px solid #333;
            font-weight: bold; position: relative;
        }
        .close-comments { position: absolute; right: 15px; cursor: pointer; }

        .comment-list { flex: 1; overflow-y: auto; padding: 15px; font-size: 14px; }
        .single-comment { margin-bottom: 12px; border-bottom: 0.5px solid #222; padding-bottom: 5px; }
        .comment-user { color: #8ab4f8; font-weight: bold; margin-right: 5px; }

        .comment-input-area {
            padding: 10px; border-top: 1px solid #333; display: flex; gap: 10px;
        }
        input[type="text"] {
            flex: 1; background: #333; border: none; border-radius: 20px;
            padding: 8px 15px; color: white; outline: none;
        }
        .send-btn { color: #24a1de; font-weight: bold; cursor: pointer; border:none; background:none;}

        .info-overlay { position: absolute; bottom: 30px; left: 15px; width: 60%; pointer-events: none; }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <div class="comment-panel" id="commentPanel">
        <div class="comment-header">
            Yorumlar <span class="close-comments" onclick="toggleComments()">‚úï</span>
        </div>
        <div class="comment-list" id="commentList">
            </div>
        <div class="comment-input-area">
            <input type="text" id="commentInput" placeholder="Yorum yap...">
            <button class="send-btn" onclick="addComment()">Payla≈ü</button>
        </div>
    </div>

    <div class="reels-container" id="reelsContainer"></div>
</div>

<script>
    const videoList = ['reels1.mp4', 'reels2.mp4', 'reels3.mp4', 'reels4.mp4'];
    const container = document.getElementById('reelsContainer');
    let currentVideoIndex = 0;

    // Her video i√ßin yorumlarƒ± saklayan nesne
    const videoData = {}; 

    function toggleComments() {
        document.getElementById('commentPanel').classList.toggle('active');
    }

    function addComment() {
        const input = document.getElementById('commentInput');
        if(!input.value) return;

        // Mevcut videonun yorum listesine ekle
        if(!videoData[currentVideoIndex]) videoData[currentVideoIndex] = [];
        videoData[currentVideoIndex].push(input.value);

        updateCommentUI();
        input.value = "";
        
        // Yorum sayƒ±sƒ±nƒ± g√ºncelle
        const counts = document.querySelectorAll('.comment-count');
        counts[currentVideoIndex].innerText = videoData[currentVideoIndex].length;
    }

    function updateCommentUI() {
        const list = document.getElementById('commentList');
        list.innerHTML = "";
        const comments = videoData[currentVideoIndex] || [];
        comments.forEach(text => {
            list.innerHTML += `<div class="single-comment"><span class="comment-user">√úye:</span>${text}</div>`;
        });
    }

    function render() {
        videoList.forEach((file, i) => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <video src="${file}" loop playsinline onclick="this.paused ? this.play() : this.pause()"></video>
                <div class="side-bar">
                    <div class="action-item" onclick="this.querySelector('.icon').innerText='‚ù§Ô∏è'">
                        <span class="icon">ü§ç</span>
                        <span class="count">0</span>
                    </div>
                    <div class="action-item" onclick="currentVideoIndex=${i}; updateCommentUI(); toggleComments();">
                        <span class="icon">üí¨</span>
                        <span class="count comment-count">0</span>
                    </div>
                    <div class="action-item"><span class="icon">üîñ</span><span class="count">0</span></div>
                </div>
                <div class="info-overlay"><h4>@video_sahibi_${i+1}</h4></div>
            `;
            container.appendChild(card);
        });
    }

    container.addEventListener('scroll', () => {
        const videos = document.querySelectorAll('video');
        videos.forEach((v, index) => {
            const pos = v.getBoundingClientRect();
            if (pos.top >= -50 && pos.top <= 50) {
                currentVideoIndex = index; // Hangi videodayƒ±z takip et
                v.play().catch(() => {});
            } else { v.pause(); }
        });
    });

    render();
</script>

</body>
</html>
