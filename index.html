<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√ºrk√ße Pop Reels</title>
    <style>
        body { margin: 0; padding: 0; background-color: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; color: white; overflow: hidden; }
        .reels-wrapper { width: 100%; max-width: 380px; height: 94vh; position: relative; border-radius: 35px; overflow: hidden; border: 5px solid #222; box-shadow: 0 0 50px rgba(0,0,0,0.9); }
        .reels-container { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
        .reels-container::-webkit-scrollbar { display: none; }
        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; background: #000; }
        iframe { width: 100%; height: 100%; pointer-events: none; }
        
        /* Yan Men√º (Beƒüen, Yorum, Kaydet) */
        .side-bar { position: absolute; right: 12px; bottom: 100px; display: flex; flex-direction: column; align-items: center; gap: 20px; z-index: 100; }
        .action-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.1s; }
        .action-item:active { transform: scale(0.9); }
        .icon { font-size: 30px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .count { font-size: 11px; font-weight: bold; margin-top: 2px; }

        /* Tƒ±klama Katmanƒ± */
        .click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; }

        /* Kalp Animasyonu */
        .heart-animation { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); font-size: 100px; color: red; pointer-events: none; z-index: 200; }
        .animate-heart { animation: heartPop 0.8s ease-out forwards; }
        @keyframes heartPop { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 50% { transform: translate(-50%, -50%) scale(1.6); opacity: 1; } 100% { transform: translate(-50%, -150%) scale(1.2); opacity: 0; } }

        .video-info { position: absolute; bottom: 25px; left: 15px; width: 70%; pointer-events: none; z-index: 60; text-shadow: 0 2px 4px black; }
        .video-info h3 { margin: 0; font-size: 16px; }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <div id="heartPop" class="heart-animation">‚ù§Ô∏è</div>
    <div class="reels-container" id="reelsContainer"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
    // G√ºncel T√ºrk√ße Pop√ºler Video ID'leri
    const videoData = [
        { id: 'znv__YAlrTQ', title: '√ñlene Kadar A≈üƒ±k Olamazsƒ±n' },
        { id: 'lB6IgV1kapU', title: 'Beg√ºm Polat - Yeni ≈ûarkƒ±' },
        { id: 'dj7QJ0-VIHc', title: 'T√ºrkiye 2024 Hitleri' },
        { id: 'XHYVGwXC4Tc', title: 'Mert Sarƒ± - ≈ûarkƒ± Halleri' },
        { id: 'fkDpX8UXHN4', title: 'Manifest - Dans Vibe' }
    ];
    
    const players = {};
    let clickTimer = null;

    function onYouTubeIframeAPIReady() {
        const container = document.getElementById('reelsContainer');
        videoData.forEach((video, i) => {
            const isLiked = localStorage.getItem(`like_${video.id}`) === 'true';
            const isSaved = localStorage.getItem(`save_${video.id}`) === 'true';
            
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <div class="click-layer" onclick="handleVideoTap('${video.id}', ${i})"></div>
                <div id="player-${video.id}"></div>
                <div class="side-bar">
                    <div class="action-item" onclick="event.stopPropagation(); toggleAction('${video.id}', ${i}, 'like')">
                        <span class="icon like-icon">${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
                        <span class="count like-count">${isLiked ? 1 : 0}</span>
                    </div>
                    <div class="action-item" onclick="event.stopPropagation(); promptComment('${video.id}')">
                        <span class="icon">üí¨</span>
                        <span class="count">Yorum</span>
                    </div>
                    <div class="action-item" onclick="event.stopPropagation(); toggleAction('${video.id}', ${i}, 'save')">
                        <span class="icon save-icon">${isSaved ? 'üîñ' : 'üè≥Ô∏è'}</span>
                        <span class="count">${isSaved ? 'Kaydedildi' : 'Kaydet'}</span>
                    </div>
                </div>
                <div class="video-info">
                    <h3>${video.title}</h3>
                </div>
            `;
            container.appendChild(card);

            players[video.id] = new YT.Player(`player-${video.id}`, {
                videoId: video.id,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': video.id, 'modestbranding': 1, 'rel': 0 },
                events: { 'onReady': (e) => { if(i === 0) e.target.playVideo(); } }
            });
        });
    }

    function handleVideoTap(id, index) {
        if (!clickTimer) {
            clickTimer = setTimeout(() => {
                const state = players[id].getPlayerState();
                state === 1 ? players[id].pauseVideo() : players[id].playVideo();
                clickTimer = null;
            }, 250);
        } else {
            clearTimeout(clickTimer);
            clickTimer = null;
            toggleAction(id, index, 'like', true);
        }
    }

    function toggleAction(id, index, type, force = false) {
        const key = `${type}_${id}`;
        const isActive = localStorage.getItem(key) === 'true';
        const iconEl = document.querySelector(`.video-card:nth-child(${index+1}) .${type}-icon`);
        const countEl = document.querySelector(`.video-card:nth-child(${index+1}) .${type}-count`);

        if (type === 'like') {
            if (!isActive) {
                localStorage.setItem(key, 'true');
                iconEl.innerText = '‚ù§Ô∏è';
                countEl.innerText = '1';
                animateHeart();
            } else if (!force) {
                localStorage.removeItem(key);
                iconEl.innerText = 'ü§ç';
                countEl.innerText = '0';
            } else { animateHeart(); }
        } else if (type === 'save') {
            const saveIcon = document.querySelectorAll('.save-icon')[index];
            const saveText = saveIcon.nextElementSibling;
            if (!isActive) {
                localStorage.setItem(key, 'true');
                saveIcon.innerText = 'üîñ';
                saveText.innerText = 'Kaydedildi';
            } else {
                localStorage.removeItem(key);
                saveIcon.innerText = 'üè≥Ô∏è';
                saveText.innerText = 'Kaydet';
            }
        }
    }

    function promptComment(id) {
        const userComment = prompt("Yorumunuzu yazƒ±n:");
        if (userComment) {
            alert("Yorumunuz ba≈üarƒ±yla kaydedildi! (Lokal)");
            localStorage.setItem(`comment_${id}`, userComment);
        }
    }

    function animateHeart() {
        const heart = document.getElementById('heartPop');
        heart.classList.remove('animate-heart');
        void heart.offsetWidth;
        heart.classList.add('animate-heart');
    }

    // Otomatik Kaydƒ±rma Y√∂netimi
    document.getElementById('reelsContainer').addEventListener('scroll', () => {
        videoData.forEach(v => {
            const rect = document.getElementById(`player-${v.id}`).parentElement.getBoundingClientRect();
            if (rect.top >= -100 && rect.top <= 100) {
                players[v.id].playVideo();
            } else {
                players[v.id].pauseVideo();
            }
        });
    });
</script>
</body>
</html>
