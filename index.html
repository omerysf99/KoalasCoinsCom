<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video İzleme Platformu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <nav class="bg-black p-4 flex justify-between items-center sticky top-0 z-50">
        <h1 class="text-red-600 text-2xl font-bold tracking-tighter">MY TUBE</h1>
        <div class="flex w-1/2">
            <input id="searchInput" type="text" placeholder="Video Ara..." class="w-full p-2 rounded-l bg-gray-800 border-none focus:ring-2 focus:ring-red-600 outline-none text-white">
            <button onclick="searchVideos()" class="bg-gray-700 px-4 rounded-r hover:bg-gray-600">Ara</button>
        </div>
        <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center font-bold">U</div>
    </nav>

    <main class="p-6">
        <div id="playerSection" class="hidden mb-10 max-w-5xl mx-auto">
            <div class="video-container rounded-lg shadow-2xl">
                <div id="player"></div>
            </div>
            <h2 id="currentVideoTitle" class="mt-4 text-2xl font-bold"></h2>
        </div>

        <div id="videoGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            </div>
    </main>

    <script>
        const API_KEY = 'SENİN_API_ANAHTARIN'; // Buraya kendi API anahtarını koy
        const videoGrid = document.getElementById('videoGrid');
        const searchInput = document.getElementById('searchInput');

        // Sayfa yüklendiğinde popüler videoları getir
        window.onload = () => {
            fetchVideos('trend videolar');
        };

        async function fetchVideos(query) {
            const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${query}&type=video&key=${API_KEY}`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                displayVideos(data.items);
            } catch (error) {
                console.error("Hata:", error);
                videoGrid.innerHTML = "<p class='text-center w-full'>API Anahtarınızı kontrol edin veya günlük limit dolmuş olabilir.</p>";
            }
        }

        function displayVideos(videos) {
            videoGrid.innerHTML = '';
            videos.forEach(video => {
                const videoCard = `
                    <div class="cursor-pointer hover:scale-105 transition-transform" onclick="playVideo('${video.id.videoId}', '${video.snippet.title.replace(/'/g, "\\'")}')">
                        <img src="${video.snippet.thumbnails.high.url}" class="rounded-xl w-full">
                        <div class="mt-3">
                            <h3 class="font-semibold line-clamp-2">${video.snippet.title}</h3>
                            <p class="text-gray-400 text-sm mt-1">${video.snippet.channelTitle}</p>
                        </div>
                    </div>
                `;
                videoGrid.innerHTML += videoCard;
            });
        }

        function searchVideos() {
            const query = searchInput.value;
            if(query) fetchVideos(query);
        }

        function playVideo(id, title) {
            const playerSection = document.getElementById('playerSection');
            const playerDiv = document.getElementById('player');
            const titleDiv = document.getElementById('currentVideoTitle');

            playerSection.classList.remove('hidden');
            playerDiv.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
            titleDiv.innerText = title;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Enter tuşu ile arama yapma
        searchInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") searchVideos();
        });
    </script>
</body>
</html>
