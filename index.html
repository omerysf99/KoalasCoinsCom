<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>YouTube Ultra - Auto-Switch API Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f0f0f; color: white; font-family: 'Roboto', sans-serif; }
        .v-card:hover img { transform: scale(1.03); border-radius: 0; }
        .status-pill { padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: bold; }
        .active-key { background: #059669; color: white; }
        .dead-key { background: #dc2626; color: white; text-decoration: line-through; }
    </style>
</head>
<body>

    <div id="api-dashboard" class="bg-[#1a1a1a] border-b border-[#272727] p-2 flex gap-3 overflow-x-auto items-center">
        <span class="text-xs text-gray-400 font-bold ml-2">API POOL:</span>
        <div id="key-indicators" class="flex gap-2"></div>
    </div>

    <nav class="sticky top-0 bg-[#0f0f0f] border-b border-[#272727] p-4 flex justify-between items-center z-50">
        <h1 class="text-xl font-bold text-red-600">‚ñ∂ YT_AGA_PREMIUM</h1>
        <div class="flex w-1/2">
            <input id="q" type="text" placeholder="Ara..." class="w-full bg-[#121212] border border-[#303030] rounded-l-full px-5 py-2 outline-none">
            <button onclick="engine.search()" class="bg-[#222] px-6 rounded-r-full border border-[#303030]">üîç</button>
        </div>
        <div class="text-xs text-green-500 font-mono" id="current-key-name">Key #1 Aktif</div>
    </nav>

    <main id="grid" class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"></main>

    <script>
        // --- API HAVUZU ---
        // Buraya Google Cloud'dan aldƒ±ƒüƒ±n 3-4 farklƒ± anahtarƒ± ekle.
        // Biri biterse diƒüeri otomatik devreye girer.
        const API_POOL = [
            'AIzaSyDkaygARzpXfIXlozjyppLdXsPoE-mq1gg', // Anahtar 1
            'AIzaSyC123_ORNEK_ANAHTAR_456_ABC',        // Anahtar 2 (Kendi aldƒ±klarƒ±nƒ± ekle)
            'AIzaSyD789_ORNEK_ANAHTAR_000_XYZ'         // Anahtar 3
        ];

        const engine = {
            currentIndex: 0,
            deadKeys: new Set(),

            // Aktif anahtarƒ± getir
            get currentKey() {
                return API_POOL[this.currentIndex];
            },

            // Aray√ºz√º g√ºncelle
            updateDashboard() {
                const container = document.getElementById('key-indicators');
                container.innerHTML = API_POOL.map((k, i) => `
                    <span class="status-pill ${this.currentIndex === i ? 'active-key' : (this.deadKeys.has(i) ? 'dead-key' : 'bg-gray-700')}">
                        Key #${i + 1}
                    </span>
                `).join('');
                document.getElementById('current-key-name').innerText = `Key #${this.currentIndex + 1} Aktif`;
            },

            // OTOMATƒ∞K API DEƒûƒ∞≈ûTƒ∞RME MOTORU
            async fetchSafe(endpoint) {
                this.updateDashboard();
                
                try {
                    const res = await fetch(`https://www.googleapis.com/youtube/v3/${endpoint}&key=${this.currentKey}`);
                    
                    if (res.status === 403) {
                        console.warn(`Key #${this.currentIndex + 1} patladƒ± (Kota Doldu). Sonrakine ge√ßiliyor...`);
                        this.deadKeys.add(this.currentIndex);
                        
                        if (this.currentIndex < API_POOL.length - 1) {
                            this.currentIndex++; // Sonraki anahtara ge√ß
                            return this.fetchSafe(endpoint); // ƒ∞steƒüi yeni anahtarla tekrarla
                        } else {
                            throw new Error("T√úM API ANAHTARLARI T√úKENDƒ∞! Yarƒ±n gel aƒüa.");
                        }
                    }

                    if (!res.ok) throw new Error("API Hatasƒ±!");
                    return await res.json();

                } catch (err) {
                    alert(err.message);
                    return null;
                }
            },

            async search() {
                const query = document.getElementById('q').value || 't√ºrkiye trend videolar';
                const grid = document.getElementById('grid');
                grid.innerHTML = 'Y√ºkleniyor...';

                const data = await this.fetchSafe(`search?part=snippet&maxResults=20&q=${query}&type=video`);
                if (!data) return;

                grid.innerHTML = data.items.map(v => `
                    <div class="v-card cursor-pointer" onclick="window.open('https://youtube.com/watch?v=${v.id.videoId}')">
                        <div class="relative overflow-hidden rounded-xl">
                            <img src="${v.snippet.thumbnails.high.url}" class="w-full transition duration-300">
                        </div>
                        <h3 class="mt-3 font-bold text-sm line-clamp-2">${v.snippet.title}</h3>
                        <p class="text-xs text-gray-400 mt-1">${v.snippet.channelTitle}</p>
                    </div>
                `).join('');
            }
        };

        // Ba≈ülat
        engine.search();
    </script>
</body>
</html>
