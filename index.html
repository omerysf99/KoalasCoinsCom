<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reels - Gizlenebilir Ses Paneli</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #121212;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; font-family: sans-serif; color: white;
        }

        .reels-wrapper {
            width: 100%; max-width: 380px; height: 85vh;
            position: relative; background: #000;
            border-radius: 30px; overflow: hidden; border: 6px solid #333;
        }

        .reels-container {
            height: 100%; overflow-y: scroll;
            scroll-snap-type: y mandatory; scroll-behavior: smooth;
        }
        .reels-container::-webkit-scrollbar { display: none; }

        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* SaÄŸ Ãœst Ses Butonu */
        .volume-toggle-btn {
            position: absolute; top: 20px; right: 20px;
            width: 45px; height: 45px; border-radius: 50%;
            background: rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.2);
            color: white; font-size: 20px; cursor: pointer; z-index: 101;
            display: flex; justify-content: center; align-items: center;
        }

        /* Gizlenebilir Ses Paneli */
        .volume-panel {
            position: absolute; top: 75px; right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 10px; border-radius: 15px;
            display: flex; flex-direction: column; align-items: center;
            gap: 10px; z-index: 100;
            transition: opacity 0.3s, transform 0.3s;
            opacity: 0; transform: translateY(-10px);
            pointer-events: none; /* Gizliyken tÄ±klanmaz */
        }

        .volume-panel.active {
            opacity: 1; transform: translateY(0);
            pointer-events: all;
        }

        .volume-slider {
            -webkit-appearance: slider-vertical;
            width: 10px; height: 150px; cursor: pointer;
        }

        .info-overlay { position: absolute; bottom: 20px; left: 15px; pointer-events: none; }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <button class="volume-toggle-btn" onclick="toggleVolumePanel()">ðŸ”Š</button>

    <div class="volume-panel" id="volumePanel">
        <input type="range" class="volume-slider" min="0" max="1" step="0.05" value="0.5" oninput="changeVolume(this.value)">
        <span id="volPercent">50%</span>
    </div>

    <div class="reels-container" id="reelsContainer">
        </div>
</div>

<script>
    const videoFiles = ['reels1.mp4', 'reels2.mp4', 'reels3.mp4'];
    const container = document.getElementById('reelsContainer');
    let currentVolume = 0.5;

    function toggleVolumePanel() {
        document.getElementById('volumePanel').classList.toggle('active');
    }

    function changeVolume(val) {
        currentVolume = val;
        document.getElementById('volPercent').innerText = Math.round(val * 100) + "%";
        const vids = document.querySelectorAll('video');
        vids.forEach(v => {
            v.volume = val;
            v.muted = val == 0;
        });
    }

    function createVideo(src, id) {
        const div = document.createElement('div');
        div.className = 'video-card';
        div.innerHTML = `<video src="${src}" loop playsinline></video>
                         <div class="info-overlay"><h4>Reels #${id}</h4></div>`;
        return div;
    }

    function loadContent() {
        videoFiles.forEach((file, i) => {
            container.appendChild(createVideo(file, i + 1));
        });
    }

    container.addEventListener('scroll', () => {
        if (container.scrollTop + container.clientHeight >= container.scrollHeight - 10) loadContent();
        
        const videos = document.querySelectorAll('video');
        videos.forEach(v => {
            const rect = v.getBoundingClientRect();
            if (rect.top >= 0 && rect.bottom <= window.innerHeight + 50) {
                v.play().catch(() => {});
                v.volume = currentVolume;
            } else {
                v.pause();
            }
        });
    });

    loadContent();

    // Ä°lk etkileÅŸimde sesi aÃ§ (TarayÄ±cÄ± kÄ±sÄ±tlamasÄ± iÃ§in)
    window.addEventListener('click', () => {
        const vids = document.querySelectorAll('video');
        vids.forEach(v => v.muted = false);
    }, { once: true });
</script>

</body>
</html>
