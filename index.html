<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haberler.com | Pro Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
    <script type="text/javascript" src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>
    
    <style>
        :root { --red: #d32f2f; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #ffeb3b; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        
        .header { background: #111827; border-bottom: 3px solid var(--red); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
        .header h1 { margin: 0; font-size: 1.3rem; color: var(--red); letter-spacing: 1px; }

        .container { max-width: 500px; margin: 0 auto; padding: 15px; }

        /* Haber Kartı */
        .news-card { background: var(--card); border-radius: 12px; margin-bottom: 20px; overflow: hidden; border: 1px solid #334155; cursor: pointer; }
        .news-img { width: 100%; height: 180px; object-fit: cover; }
        .news-body { padding: 12px; }
        .news-tag { color: var(--red); font-size: 10px; font-weight: bold; text-transform: uppercase; }
        .news-title { font-size: 1.1rem; font-weight: 700; margin: 5px 0; line-height: 1.4; }

        /* Detay Paneli */
        #detail-view { position: fixed; inset: 0; background: var(--bg); display: none; overflow-y: auto; z-index: 9999; padding: 20px; }
        .close-btn { background: var(--red); color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-bottom: 20px; cursor: pointer; }

        /* Güvenlik Kodu */
        #security-alert {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: #111827; color: var(--accent); padding: 15px 25px; border-radius: 12px;
            font-weight: 900; display: none; z-index: 10001; border: 2px solid var(--accent);
            box-shadow: 0 0 20px rgba(0,0,0,0.5); font-family: monospace;
        }
    </style>
</head>
<body>

<div class="header"><h1>HABERLER<span style="color:#fff">.com</span></h1></div>

<div id="security-alert">KOD: <span id="code-val">--Abc--Def</span></div>

<div class="container" id="news-feed"></div>

<div id="detail-view">
    <button class="close-btn" onclick="closeDetail()">← Listeye Dön</button>
    <div id="detail-content"></div>
</div>

<script>
    const ADMIN_ID = 8392479231;
    const primes = [11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97];

    const localNews = [
        { title: "2026 Asgari Ücret Netleşti: 28.075 TL!", img: "https://picsum.photos/seed/money/600/400", body: "Hükümet ve işçi temsilcileri arasındaki görüşmeler sonuçlandı. 2026 yılı asgari ücreti net 28.075 TL olarak açıklandı. Yeni ücret Şubat ayından itibaren geçerli olacak." },
        { title: "7 Ocak Kar Tatili: Gümüşhane'de Eğitime Ara!", img: "https://picsum.photos/seed/snow/600/400", body: "Gümüşhane Valiliği, yoğun kar yağışı ve buzlanma riski nedeniyle 7 Ocak 2026 Çarşamba günü okulların il genelinde 1 gün süreyle tatil edildiğini duyurdu." },
        { title: "Kastamonu ve Giresun'da Taşımalı Eğitim Tatil", img: "https://picsum.photos/seed/cold/600/400", body: "Kastamonu'nun yüksek kesimlerinde devam eden kar yağışı hayatı olumsuz etkiliyor. Valilik, taşımalı eğitim kapsamındaki öğrenciler için yarın tatil kararı aldı." },
        { title: "Benzine 2026'nın İlk Zammı Geldi", img: "https://picsum.photos/seed/fuel/600/400", body: "Dolar kuru ve brent petrol fiyatlarındaki artış pompaya yansıdı. Gece yarısından itibaren benzine 2.45 TL zam yapıldı. Litre fiyatı 60 TL sınırına yaklaştı." },
        { title: "Siyasette Erken Seçim Tartışmaları", img: "https://picsum.photos/seed/politics/600/400", body: "Ankara kulislerinde 2026 sonbaharında bir erken seçim yapılabileceği konuşuluyor. Muhalefet partileri hazırlıklara başladıklarını bildirdi." }
    ];

    // 1. ADEXIUM SDK Girişi
    document.addEventListener('DOMContentLoaded', () => {
        const adexiumWidget = new AdexiumWidget({wid: 'def706e3-3e7a-46b9-b07b-5c4fca45d171', adFormat: 'interstitial'});
        adexiumWidget.autoMode();
        renderNews();
        
        // Her 30 saniyede bir kod üretimi
        setInterval(showCode, 30000);
    });

    // 2. KOD STRATEJİSİ (XXAbcXXDef - XX'ler ASAL)
    function generateSmartCode() {
        const p1 = primes[Math.floor(Math.random() * primes.length)];
        const p2 = primes[Math.floor(Math.random() * primes.length)];
        return `${p1}Abc${p2}Def`;
    }

    function showCode() {
        document.getElementById('code-val').innerText = generateSmartCode();
        const box = document.getElementById('security-alert');
        box.style.display = 'block';
        setTimeout(() => box.style.display = 'none', 7000);
    }

    // 3. HABER SİSTEMİ
    function renderNews() {
        const feed = document.getElementById('news-feed');
        localNews.forEach((n, i) => {
            const card = document.createElement('div');
            card.className = 'news-card';
            card.onclick = () => openDetail(i);
            card.innerHTML = `
                <img src="${n.img}" class="news-img">
                <div class="news-body">
                    <span class="news-tag">FLAŞ HABER</span>
                    <div class="news-title">${n.title}</div>
                </div>`;
            feed.appendChild(card);
        });
    }

    function openDetail(index) {
        const n = localNews[index];
        const content = `
            <img src="${n.img}" style="width:100%; border-radius:15px; margin-bottom:20px;">
            <h1 style="color:#fff; line-height:1.3;">${n.title}</h1>
            <p style="font-size:1.1rem; line-height:1.7; color:#cbd5e1;">${n.body}</p>
        `;
        document.getElementById('detail-content').innerHTML = content;
        document.getElementById('detail-view').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeDetail() {
        document.getElementById('detail-view').style.display = 'none';
        document.body.style.overflow = 'auto';
    }
</script>
</body>
</html>
