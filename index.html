<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA KOMBAT | ULTRA</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Poppins:wght@400;700;900&display=swap');
        
        :root { --main-yellow: #f5bb5f; --neon-blue: #00d2ff; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { background: #050505; color: #fff; overflow: hidden; height: 100vh; position: fixed; width: 100%; }

        /* Arkaplan Işıltıları */
        .glow-bg { position: absolute; width: 200px; height: 200px; background: var(--main-yellow); filter: blur(100px); opacity: 0.1; top: 20%; left: 50%; transform: translateX(-50%); z-index: -1; }

        /* Koala Tıklama Alanı & Animasyonlar */
        .koala-container { position: relative; width: 290px; height: 290px; margin: 20px auto; z-index: 10; }
        .main-koala {
            width: 100%; height: 100%; border-radius: 50%;
            border: 8px solid rgba(255,255,255,0.05);
            background: radial-gradient(circle, #222 0%, #000 100%);
            box-shadow: 0 0 40px rgba(0,0,0,0.8), inset 0 0 20px rgba(245, 187, 95, 0.2);
            padding: 10px; transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; position: relative; overflow: hidden;
        }
        .main-koala img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; pointer-events: none; }
        
        /* Tıklama Efekti (Squash and Stretch) */
        .click-active { transform: scale(0.92) rotate(1deg); }

        /* Kombo UI */
        #combo-meter { position: absolute; top: 0; right: 0; font-family: 'Orbitron', sans-serif; color: #ff0055; font-size: 24px; font-weight: 900; opacity: 0; transition: 0.2s; text-shadow: 0 0 10px #ff0055; }

        /* Sayı Fırlatma */
        .tap-number { position: absolute; font-weight: 900; font-size: 38px; color: #fff; pointer-events: none; animation: floatAndFade 0.7s forwards; z-index: 100; font-family: 'Orbitron', sans-serif; }
        @keyframes floatAndFade {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-180px) scale(1.5); }
        }

        /* Navigasyon & Barlar */
        .progress-bar-bg { width: 100%; height: 14px; background: #1a1a1a; border-radius: 20px; border: 1px solid #333; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: linear-gradient(90deg, #f5bb5f, #ff8c00); box-shadow: 0 0 15px rgba(245, 187, 95, 0.5); transition: width 0.2s; }
        
        nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; background: rgba(10,10,10,0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #222; padding-bottom: 15px; }
        .nav-link { color: #555; text-align: center; font-size: 10px; font-weight: bold; }
        .nav-link.active { color: var(--main-yellow); }
    </style>
</head>
<body>

    <div class="glow-bg"></div>

    <div class="p-4 grid grid-cols-3 gap-2">
        <div class="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-2 text-center">
            <p class="text-[8px] text-zinc-500 font-bold">MULTI-TAP</p>
            <p class="text-xs font-black text-blue-400" id="ui-multi">Lvl 1</p>
        </div>
        <div class="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-2 text-center">
            <p class="text-[8px] text-zinc-500 font-bold">HOURLY PROFIT</p>
            <p class="text-xs font-black text-green-400" id="ui-pps">0</p>
        </div>
        <div class="bg-zinc-900/50 border border-zinc-800 rounded-2xl p-2 text-center">
            <p class="text-[8px] text-zinc-500 font-bold">RANK</p>
            <p class="text-xs font-black text-yellow-500">CEO</p>
        </div>
    </div>

    <div class="text-center mt-4">
        <div class="flex items-center justify-center gap-2">
            <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" class="w-10 h-10">
            <h1 id="ui-bal" class="text-5xl font-black italic tracking-tighter">0</h1>
        </div>
        <p class="text-[10px] text-zinc-500 font-bold mt-2 uppercase tracking-widest">Koala Kombat Network</p>
    </div>

    <div class="koala-container">
        <div id="combo-meter">x10 COMBO!</div>
        <div class="main-koala" id="tap-target">
            <img src="coinkoala.jpg" alt="Koala">
        </div>
    </div>

    <div class="px-6 mt-4">
        <div class="flex justify-between items-end mb-2">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-bolt text-yellow-400 text-2xl animate-pulse"></i>
                <span id="ui-energy" class="text-2xl font-black">1000</span>
                <span class="text-zinc-500 text-sm font-bold">/ 1000</span>
            </div>
            <div class="text-[10px] font-black text-zinc-400">NEXT LEVEL: 100M</div>
        </div>
        <div class="progress-bar-bg">
            <div id="energy-bar" class="progress-bar-fill" style="width: 100%;"></div>
        </div>
    </div>

    <nav>
        <div class="nav-link active"><i class="fa-solid fa-paw text-2xl block mb-1"></i>Earn</div>
        <div class="nav-link" onclick="tg.showAlert('Market Yakında!')"><i class="fa-solid fa-shop text-2xl block mb-1"></i>Market</div>
        <div class="nav-item">
             <div class="w-14 h-14 bg-zinc-800 rounded-full border-4 border-black flex items-center justify-center -mt-10 shadow-xl">
                <i class="fa-solid fa-rocket text-yellow-500 text-xl"></i>
             </div>
        </div>
        <div class="nav-link" onclick="tg.showAlert('Görevler Yakında!')"><i class="fa-solid fa-tasks text-2xl block mb-1"></i>Tasks</div>
        <div class="nav-link" onclick="tg.showAlert('Cüzdan Yakında!')"><i class="fa-solid fa-wallet text-2xl block mb-1"></i>Wallet</div>
    </nav>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let user = { bal: 0, pps: 0, energy: 1000, maxEnergy: 1000, multi: 1 };
    let combo = 0;
    let comboTimer;

    const tapTarget = document.getElementById('tap-target');
    const comboUI = document.getElementById('combo-meter');

    // Tıklama Motoru
    tapTarget.addEventListener('touchstart', (e) => {
        e.preventDefault();
        if(user.energy < user.multi) {
            tg.HapticFeedback.notificationOccurred('error');
            return;
        }

        // Görsel Tepki
        tapTarget.classList.add('click-active');
        setTimeout(() => tapTarget.classList.remove('click-active'), 100);

        // Kombo Mantığı
        combo++;
        clearTimeout(comboTimer);
        comboTimer = setTimeout(() => { combo = 0; comboUI.style.opacity = 0; }, 1000);
        
        if(combo > 5) {
            comboUI.innerText = `x${combo} COMBO!`;
            comboUI.style.opacity = 1;
        }

        // Kazanç
        let bonus = combo > 15 ? 2 : 1; // 15 tık üstü x2 bonus
        let totalGain = user.multi * bonus;
        
        user.bal += totalGain;
        user.energy -= user.multi;
        
        updateUI();

        // Sayı Fırlatma Efekti
        const touch = e.touches[0];
        createTapEffect(touch.pageX, touch.pageY, totalGain);

        tg.HapticFeedback.impactOccurred(combo > 15 ? 'heavy' : 'light');
    });

    function createTapEffect(x, y, gain) {
        const el = document.createElement('div');
        el.className = 'tap-number';
        el.innerText = `+${gain}`;
        el.style.left = `${x - 20}px`;
        el.style.top = `${y - 40}px`;
        
        // Kombo rengi
        if(combo > 15) el.style.color = '#ff8c00';
        
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 700);
    }

    function updateUI() {
        document.getElementById('ui-bal').innerText = Math.floor(user.bal).toLocaleString();
        document.getElementById('ui-energy').innerText = user.energy;
        document.getElementById('energy-bar').style.width = (user.energy / user.maxEnergy * 100) + "%";
        document.getElementById('ui-pps').innerText = "+" + user.pps;
    }

    // Enerji Dolumu
    setInterval(() => {
        if(user.energy < user.maxEnergy) {
            user.energy = Math.min(user.maxEnergy, user.energy + 2);
            updateUI();
        }
    }, 1000);

    window.onload = updateUI;
</script>
</body>
</html>
