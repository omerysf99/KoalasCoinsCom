<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benim Sitem - √ñzel Reels</title>
    <style>
        body { margin: 0; padding: 0; background-color: #050505; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; color: white; overflow: hidden; }
        .reels-wrapper { width: 100%; max-width: 400px; height: 95vh; position: relative; border-radius: 30px; overflow: hidden; border: 4px solid #1a1a1a; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .reels-container { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
        .reels-container::-webkit-scrollbar { display: none; }
        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; background: #000; }
        iframe { width: 100%; height: 100%; pointer-events: none; transform: scale(1.01); }
        
        /* Saƒü Panel Butonlarƒ± */
        .side-bar { position: absolute; right: 15px; bottom: 100px; display: flex; flex-direction: column; align-items: center; gap: 25px; z-index: 100; }
        .btn-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: 0.2s; }
        .btn-item:hover { transform: scale(1.1); }
        .icon-circle { width: 50px; height: 50px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(10px); margin-bottom: 5px; font-size: 24px; }
        .count-text { font-size: 12px; font-weight: 600; color: #eee; }

        /* Sƒ∞TEYE √ñZEL YORUM PANELƒ∞ */
        .comment-panel { position: absolute; bottom: -100%; left: 0; width: 100%; height: 50%; background: #111; border-radius: 20px 20px 0 0; z-index: 200; transition: 0.4s ease; padding: 20px; box-sizing: border-box; }
        .comment-panel.active { bottom: 0; }
        .comment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .comment-list { height: 70%; overflow-y: auto; font-size: 14px; margin-bottom: 10px; }
        .comment-input-area { display: flex; gap: 10px; }
        .comment-input { flex: 1; background: #222; border: 1px solid #444; color: white; padding: 10px; border-radius: 10px; outline: none; }
        .send-btn { background: #ff0050; border: none; color: white; padding: 0 15px; border-radius: 10px; cursor: pointer; }

        /* Tƒ±klama Alanƒ± */
        .click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; }
        .video-title { position: absolute; bottom: 30px; left: 20px; z-index: 60; text-shadow: 0 2px 4px black; max-width: 60%; }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <div class="reels-container" id="reelsContainer"></div>
    
    <div class="comment-panel" id="commentPanel">
        <div class="comment-header">
            <span>Yorumlar</span>
            <span onclick="toggleComments()" style="cursor:pointer; font-size: 20px;">‚úï</span>
        </div>
        <div class="comment-list" id="commentList"></div>
        <div class="comment-input-area">
            <input type="text" class="comment-input" id="cInput" placeholder="Sence nasƒ±l?">
            <button class="send-btn" onclick="addComment()">G√∂nder</button>
        </div>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
    const videos = [
        { id: 'znv__YAlrTQ', title: 'A≈ük S√∂zleri - Pop√ºler' },
        { id: 'dj7QJ0-VIHc', title: 'T√ºrkiye 2025 Hitleri' },
        { id: 'fkDpX8UXHN4', title: 'Manifest Dans Vibe' },
        { id: 'lB6IgV1kapU', title: 'Beg√ºm Polat - Yeni ≈ûarkƒ±' }
    ];

    let players = {};
    let activeVideoId = null;

    function onYouTubeIframeAPIReady() {
        const container = document.getElementById('reelsContainer');
        videos.forEach((v, i) => {
            const liked = localStorage.getItem(`sitem_like_${v.id}`) ? '‚ù§Ô∏è' : 'ü§ç';
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <div class="click-layer" onclick="playPause('${v.id}')"></div>
                <div id="player-${v.id}"></div>
                <div class="side-bar">
                    <div class="btn-item" onclick="siteLike('${v.id}', this)">
                        <div class="icon-circle">${liked}</div>
                        <span class="count-text">Beƒüen</span>
                    </div>
                    <div class="btn-item" onclick="toggleComments('${v.id}')">
                        <div class="icon-circle">üí¨</div>
                        <span class="count-text">Yorum</span>
                    </div>
                </div>
                <div class="video-title"><h4>${v.title}</h4></div>
            `;
            container.appendChild(card);

            players[v.id] = new YT.Player(`player-${v.id}`, {
                videoId: v.id,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': v.id, 'mute': 1 },
                events: { 'onReady': (e) => { if(i===0) { e.target.playVideo(); activeVideoId = v.id; } } }
            });
        });
    }

    function siteLike(id, el) {
        const isLiked = localStorage.getItem(`sitem_like_${id}`);
        if (!isLiked) {
            localStorage.setItem(`sitem_like_${id}`, 'true');
            el.querySelector('.icon-circle').innerText = '‚ù§Ô∏è';
        } else {
            localStorage.removeItem(`sitem_like_${id}`);
            el.querySelector('.icon-circle').innerText = 'ü§ç';
        }
    }

    function toggleComments(id) {
        const panel = document.getElementById('commentPanel');
        if (id) {
            activeVideoId = id;
            loadComments(id);
            panel.classList.add('active');
        } else {
            panel.classList.remove('active');
        }
    }

    function addComment() {
        const input = document.getElementById('cInput');
        if (!input.value) return;
        let comments = JSON.parse(localStorage.getItem(`sitem_comm_${activeVideoId}`) || "[]");
        comments.push(input.value);
        localStorage.setItem(`sitem_comm_${activeVideoId}`, JSON.stringify(comments));
        input.value = "";
        loadComments(activeVideoId);
    }

    function loadComments(id) {
        const list = document.getElementById('commentList');
        const comments = JSON.parse(localStorage.getItem(`sitem_comm_${id}`) || "[]");
        list.innerHTML = comments.length ? "" : "Hen√ºz yorum yok...";
        comments.forEach(c => {
            const div = document.createElement('div');
            div.style.marginBottom = "8px";
            div.innerHTML = `<strong>Misafir:</strong> ${c}`;
            list.appendChild(div);
        });
    }

    function playPause(id) {
        const state = players[id].getPlayerState();
        state === 1 ? players[id].pauseVideo() : players[id].playVideo();
    }

    // Scroll y√∂netimi
    document.getElementById('reelsContainer').addEventListener('scroll', () => {
        videos.forEach(v => {
            const rect = document.getElementById(`player-${v.id}`).parentElement.getBoundingClientRect();
            if (rect.top >= -50 && rect.top <= 50) {
                players[v.id].playVideo();
                players[v.id].unMute();
            } else {
                players[v.id].pauseVideo();
            }
        });
    });
</script>
</body>
</html>
