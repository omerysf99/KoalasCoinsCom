<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ñzel Video Platformu</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Inter', sans-serif; overflow: hidden; }
        .app-container { width: 100vw; height: 100vh; display: flex; justify-content: center; }
        .reels-frame { width: 100%; max-width: 420px; height: 100%; position: relative; background: #000; }
        .video-feed { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .video-feed::-webkit-scrollbar { display: none; }
        
        .video-card { height: 100vh; width: 100%; scroll-snap-align: start; position: relative; }
        iframe { width: 100%; height: 100%; pointer-events: none; border: none; }

        /* Siteye √ñzel Etkile≈üim Paneli */
        .actions { position: absolute; right: 15px; bottom: 120px; display: flex; flex-direction: column; gap: 20px; z-index: 100; }
        .action-btn { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 50%; width: 55px; height: 55px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.3s; border: 1px solid rgba(255,255,255,0.1); }
        .action-btn:hover { background: rgba(255,255,255,0.3); }
        .action-btn.active .heart { color: #ff0050; }
        
        /* Yorum B√∂l√ºm√º */
        .comment-box { position: absolute; bottom: -100%; left: 0; width: 100%; height: 60%; background: #121212; z-index: 1000; border-radius: 20px 20px 0 0; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); padding: 20px; box-sizing: border-box; }
        .comment-box.open { bottom: 0; }
        .comment-header { display: flex; justify-content: space-between; font-weight: bold; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
        .comments-list { height: 75%; overflow-y: auto; margin-bottom: 15px; font-size: 14px; }
        .comment-input-wrap { display: flex; gap: 10px; }
        input { flex: 1; background: #222; border: none; padding: 12px; border-radius: 25px; color: white; outline: none; }
        .post-btn { color: #0095f6; font-weight: bold; cursor: pointer; border: none; background: none; }

        .video-desc { position: absolute; bottom: 30px; left: 15px; z-index: 90; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
    </style>
</head>
<body>

<div class="app-container">
    <div class="reels-frame">
        <div class="video-feed" id="feed"></div>
        
        <div class="comment-box" id="commentBox">
            <div class="comment-header">Yorumlar <span onclick="closeComments()" style="cursor:pointer">‚úï</span></div>
            <div class="comments-list" id="commentsList"></div>
            <div class="comment-input-wrap">
                <input type="text" id="userInput" placeholder="Bu video hakkƒ±nda ne d√º≈ü√ºn√ºyorsun?">
                <button class="post-btn" onclick="postComment()">Payla≈ü</button>
            </div>
        </div>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    // Siteye √ñzel Video Havuzu (API'den de √ßekilebilir)
    const myVideos = [
        {id: 'znv__YAlrTQ', title: '√ñlene Kadar A≈üƒ±k - 2025 Trend'},
        {id: 'dj7QJ0-VIHc', title: 'Mirkelam & Pop Remix'},
        {id: 'lB6IgV1kapU', title: 'Beg√ºm Polat - Kahpe'},
        {id: 'fkDpX8UXHN4', title: 'Manifest Dance Challenge'}
    ];

    let players = {};
    let currentVideoId = "";

    function onYouTubeIframeAPIReady() {
        const feed = document.getElementById('feed');
        myVideos.forEach((v, index) => {
            const isLiked = localStorage.getItem('site_like_' + v.id) === 'true';
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <div id="player-${v.id}"></div>
                <div class="actions">
                    <div class="action-btn ${isLiked ? 'active' : ''}" onclick="toggleLike('${v.id}', this)">
                        <span class="heart" style="font-size:24px">${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
                    </div>
                    <div class="action-btn" onclick="openComments('${v.id}')">
                        <span style="font-size:22px">üí¨</span>
                    </div>
                </div>
                <div class="video-desc">
                    <strong>@benim_sitem</strong>
                    <p>${v.title}</p>
                </div>
            `;
            feed.appendChild(card);

            players[v.id] = new YT.Player(`player-${v.id}`, {
                videoId: v.id,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': v.id, 'mute': 1 },
                events: { 'onReady': (e) => { if(index === 0) e.target.playVideo(); } }
            });
        });
    }

    // Siteye √ñzel Beƒüeni
    function toggleLike(id, el) {
        const key = 'site_like_' + id;
        if (localStorage.getItem(key) === 'true') {
            localStorage.removeItem(key);
            el.classList.remove('active');
            el.querySelector('.heart').innerText = 'ü§ç';
        } else {
            localStorage.setItem(key, 'true');
            el.classList.add('active');
            el.querySelector('.heart').innerText = '‚ù§Ô∏è';
        }
    }

    // Siteye √ñzel Yorumlar
    function openComments(id) {
        currentVideoId = id;
        const box = document.getElementById('commentBox');
        const list = document.getElementById('commentsList');
        box.classList.add('open');
        
        const saved = JSON.parse(localStorage.getItem('site_comments_' + id) || "[]");
        list.innerHTML = saved.length ? "" : "<p style='color:#666'>ƒ∞lk yorumu sen yap...</p>";
        saved.forEach(c => {
            const item = document.createElement('div');
            item.style.padding = "10px 0";
            item.style.borderBottom = "1px solid #222";
            item.innerHTML = `<strong>Misafir Kullanƒ±cƒ±:</strong><br>${c}`;
            list.appendChild(item);
        });
    }

    function postComment() {
        const input = document.getElementById('userInput');
        if(!input.value) return;
        const saved = JSON.parse(localStorage.getItem('site_comments_' + currentVideoId) || "[]");
        saved.push(input.value);
        localStorage.setItem('site_comments_' + currentVideoId, JSON.stringify(saved));
        input.value = "";
        openComments(currentVideoId);
    }

    function closeComments() {
        document.getElementById('commentBox').classList.remove('open');
    }

    // Otomatik Oynatma Y√∂netimi
    document.getElementById('feed').addEventListener('scroll', () => {
        myVideos.forEach(v => {
            const el = document.getElementById(`player-${v.id}`).parentElement;
            const rect = el.getBoundingClientRect();
            if(rect.top >= -50 && rect.top <= 50) {
                players[v.id].playVideo();
                players[v.id].unMute();
            } else {
                players[v.id].pauseVideo();
            }
        });
    });
</script>

</body>
</html>
