<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shorts Pro - GeliÅŸmiÅŸ Mekanizma</title>
    <style>
        /* Modern ve KaranlÄ±k TasarÄ±m */
        body { margin: 0; padding: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        .reels-wrapper { 
            width: 100%; max-width: 420px; height: 95vh; 
            border-radius: 20px; border: 2px solid #333;
            position: relative; overflow: hidden;
            background: #111;
        }

        /* KAYDIRMA MEKANÄ°ZMASI: SNAP-SCROLL */
        .reels-container {
            height: 100%;
            overflow-y: scroll;
            scroll-snap-type: y mandatory; /* VideolarÄ±n ekrana 'yapÄ±ÅŸmasÄ±nÄ±' saÄŸlar */
            scroll-behavior: smooth;
            scrollbar-width: none; /* Firefox */
        }
        .reels-container::-webkit-scrollbar { display: none; } /* Chrome/Safari */

        .video-card {
            height: 100%;
            width: 100%;
            scroll-snap-align: start; /* Video baÅŸlangÄ±cÄ±nÄ± ekranÄ±n tepesine sabitler */
            scroll-snap-stop: always;  /* HÄ±zlÄ± kaydÄ±rÄ±rken video atlamayÄ± engeller */
            position: relative;
            background: #000;
        }

        /* Video Arka PlanÄ± (YouTube Siyah BoÅŸluklarÄ± Kapatma) */
        iframe { width: 100%; height: 100%; pointer-events: none; transform: scale(1.5); } 

        /* ETKÄ°LEÅÄ°M KATMANLARI */
        .click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; }
        
        .side-bar { 
            position: absolute; right: 15px; bottom: 120px; 
            z-index: 100; display: flex; flex-direction: column; gap: 20px; 
        }

        .action-btn { 
            background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
            border-radius: 50%; width: 50px; height: 50px; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s; border: 1px solid rgba(255,255,255,0.1);
        }
        .action-btn:active { transform: scale(0.85); }
        .count { font-size: 10px; margin-top: 2px; font-weight: bold; }

        /* KALÄ°TELÄ° KALP ANÄ°MASYONU */
        .heart-pop {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0);
            font-size: 120px; color: #ff0050; pointer-events: none; z-index: 200;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
        }
        .animate-heart { animation: heartIn 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes heartIn { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; } 100% { transform: translate(-50%, -100%) scale(1); opacity: 0; } }

        .video-meta { position: absolute; bottom: 30px; left: 15px; z-index: 60; text-shadow: 0 2px 5px black; }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <div id="heart" class="heart-pop">â¤ï¸</div>
    <div class="reels-container" id="reelsContainer"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
    // Dinamik YouTube Listesi (Senin API Key'inle Ã§alÄ±ÅŸÄ±r)
    const videos = [
        { id: 'znv__YAlrTQ', title: 'AÅŸk Vibe âœ¨' },
        { id: 'dj7QJ0-VIHc', title: 'Trend Music 2025' },
        { id: 'fkDpX8UXHN4', title: 'Dans Challenge ğŸ”¥' },
        { id: 'lB6IgV1kapU', title: 'Yeni Hit ParÃ§a' }
    ];

    const players = {};
    let clickTimer = null;

    function onYouTubeIframeAPIReady() {
        const container = document.getElementById('reelsContainer');
        
        videos.forEach((v, index) => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.setAttribute('data-v-id', v.id);
            card.innerHTML = `
                <div class="click-layer" onclick="handleTap('${v.id}')"></div>
                <div id="player-${v.id}"></div>
                <div class="side-bar">
                    <div class="action-btn" onclick="toggleLike('${v.id}', this)">
                        <span>ğŸ¤</span><span class="count">0</span>
                    </div>
                    <div class="action-btn" onclick="alert('Yorum Paneli')">
                        <span>ğŸ’¬</span><span class="count">Yorum</span>
                    </div>
                </div>
                <div class="video-meta">
                    <strong>@benim_sitem</strong>
                    <p>${v.title}</p>
                </div>
            `;
            container.appendChild(card);

            players[v.id] = new YT.Player(`player-${v.id}`, {
                videoId: v.id,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': v.id, 'mute': 1, 'modestbranding': 1 },
                events: { 'onReady': (e) => { if(index === 0) e.target.playVideo(); } }
            });
        });

        setupObserver();
    }

    // MODERN KAYDIRMA TAKÄ°BÄ° (Intersection Observer)
    function setupObserver() {
        const options = { threshold: 0.7 }; // Videonun %70'i gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nde
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('data-v-id');
                if (entry.isIntersecting) {
                    players[id].playVideo();
                    players[id].unMute(); // Ekrana gelenin sesini aÃ§
                } else {
                    players[id].pauseVideo(); // Ekrandan Ã§Ä±kanÄ±n sesini kapat ve durdur
                }
            });
        }, options);

        document.querySelectorAll('.video-card').forEach(card => observer.observe(card));
    }

    function handleTap(id) {
        if (!clickTimer) {
            clickTimer = setTimeout(() => {
                const state = players[id].getPlayerState();
                state === 1 ? players[id].pauseVideo() : players[id].playVideo();
                clickTimer = null;
            }, 250);
        } else {
            clearTimeout(clickTimer);
            clickTimer = null;
            showHeart();
        }
    }

    function showHeart() {
        const h = document.getElementById('heart');
        h.classList.remove('animate-heart');
        void h.offsetWidth;
        h.classList.add('animate-heart');
    }

    function toggleLike(id, el) {
        const span = el.querySelector('span');
        span.innerText = span.innerText === 'ğŸ¤' ? 'â¤ï¸' : 'ğŸ¤';
    }
</script>
</body>
</html>
