<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Reels Pro</title>
    <style>
        body { margin: 0; padding: 0; background-color: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; color: white; overflow: hidden; }
        .reels-wrapper { width: 100%; max-width: 380px; height: 92vh; position: relative; border-radius: 30px; overflow: hidden; border: 4px solid #333; }
        .reels-container { height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
        .reels-container::-webkit-scrollbar { display: none; }
        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; background: #111; }
        iframe { width: 100%; height: 100%; pointer-events: none; } /* Tƒ±klamalarƒ± biz y√∂neteceƒüiz */
        
        /* Yan Men√º */
        .side-bar { position: absolute; right: 10px; bottom: 80px; display: flex; flex-direction: column; align-items: center; gap: 20px; z-index: 100; }
        .action-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .icon { font-size: 28px; text-shadow: 0 2px 4px black; }
        .count { font-size: 12px; font-weight: bold; margin-top: 2px; }

        /* Tƒ±klama Alanƒ± */
        .click-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; }

        /* Kalp Animasyonu */
        .heart-animation { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); font-size: 100px; color: red; pointer-events: none; z-index: 200; }
        .animate-heart { animation: heartPop 0.7s ease-out forwards; }
        @keyframes heartPop { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.5); opacity: 1; } 100% { transform: scale(1.2) translateY(-100px); opacity: 0; } }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <div id="heartPop" class="heart-animation">‚ù§Ô∏è</div>
    <div class="reels-container" id="reelsContainer"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
    // YouTube Video ID Listesi (Buraya kendi API'nden gelen ID'leri ekleyebilirsin)
    const videoIds = ['V1Ticoqoidc', 'bB8k3r94C7o', '-nUnAkXniYU', '6-dXEKWf-KM'];
    const players = {};
    let clickTimer = null;

    function onYouTubeIframeAPIReady() {
        render();
    }

    function render() {
        const container = document.getElementById('reelsContainer');
        videoIds.forEach((id, i) => {
            const isLiked = localStorage.getItem(`yt_like_${id}`) === 'true';
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <div class="click-layer" onclick="handleInteraction('${id}', ${i})"></div>
                <div id="player-${id}"></div>
                <div class="side-bar">
                    <div class="action-item" onclick="event.stopPropagation(); toggleLike('${id}', ${i})">
                        <span class="icon like-icon">${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
                        <span class="count like-count">${isLiked ? 1 : 0}</span>
                    </div>
                </div>
            `;
            container.appendChild(card);

            players[id] = new YT.Player(`player-${id}`, {
                videoId: id,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': id, 'mute': 1 },
                events: { 'onReady': (event) => { if(i === 0) event.target.playVideo(); } }
            });
        });
    }

    function handleInteraction(id, index) {
        if (!clickTimer) {
            clickTimer = setTimeout(() => {
                const state = players[id].getPlayerState();
                state === 1 ? players[id].pauseVideo() : players[id].playVideo();
                clickTimer = null;
            }, 250);
        } else {
            clearTimeout(clickTimer);
            clickTimer = null;
            toggleLike(id, index, true);
        }
    }

    function toggleLike(id, index, forceLike = false) {
        const key = `yt_like_${id}`;
        const isLiked = localStorage.getItem(key) === 'true';
        const heartIcons = document.querySelectorAll('.like-icon');
        const countEls = document.querySelectorAll('.like-count');

        if (!isLiked) {
            localStorage.setItem(key, 'true');
            countEls[index].innerText = parseInt(countEls[index].innerText) + 1;
            heartIcons[index].innerText = '‚ù§Ô∏è';
            showHeartAnim();
        } else if (!forceLike) {
            localStorage.removeItem(key);
            countEls[index].innerText = parseInt(countEls[index].innerText) - 1;
            heartIcons[index].innerText = 'ü§ç';
        } else {
            showHeartAnim();
        }
    }

    function showHeartAnim() {
        const pop = document.getElementById('heartPop');
        pop.classList.remove('animate-heart');
        void pop.offsetWidth;
        pop.classList.add('animate-heart');
    }

    // Kaydƒ±rma sƒ±rasƒ±nda videolarƒ± y√∂net
    document.getElementById('reelsContainer').addEventListener('scroll', () => {
        videoIds.forEach(id => {
            const el = document.getElementById(`player-${id}`).parentElement;
            const rect = el.getBoundingClientRect();
            if (rect.top >= -50 && rect.top <= 50) {
                players[id].playVideo();
                players[id].unMute();
            } else {
                players[id].pauseVideo();
            }
        });
    });
</script>
</body>
</html>
