<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Ultimate V10</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --bg: #0f0f0f; --text: white; --card-bg: #272727; --hover: #3f3f3f; --yt-red: #ff0000; }
        body.light-mode { --bg: #ffffff; --text: #0f0f0f; --card-bg: #f2f2f2; --hover: #e5e5e5; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Roboto', sans-serif; overflow: hidden; }

        /* HEADER */
        header { height: 56px; padding: 0 16px; display: flex; align-items: center; justify-content: space-between; position: fixed; width: 100%; top: 0; background: var(--bg); z-index: 1000; border-bottom: 1px solid var(--hover); }
        .search-box { display: flex; width: 40%; align-items: center; }
        .search-box input { width: 100%; background: var(--bg); border: 1px solid #333; padding: 8px 16px; border-radius: 20px 0 0 20px; color: var(--text); outline: none; }
        .search-box button { background: var(--card-bg); border: 1px solid #333; padding: 8px 15px; border-radius: 0 20px 20px 0; color: var(--text); cursor: pointer; }

        /* SIDEBAR */
        .sidebar { position: fixed; left: 0; top: 56px; width: 240px; height: 100vh; background: var(--bg); padding: 12px; border-right: 1px solid var(--hover); overflow-y: auto; }
        .side-item { padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 20px; font-size: 14px; margin-bottom: 2px; transition: 0.2s; }
        .side-item:hover { background: var(--hover); }
        .side-item.active { background: var(--card-bg); font-weight: bold; }
        .side-item i { font-size: 18px; width: 24px; text-align: center; }
        .side-sep { border: 0.5px solid var(--hover); margin: 12px 0; }

        /* CONTENT */
        .main-wrapper { margin-left: 240px; margin-top: 56px; height: calc(100vh - 56px); overflow-y: auto; padding: 20px; scroll-behavior: smooth; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
        .v-card { cursor: pointer; transition: transform 0.2s; }
        .v-card:hover { transform: scale(1.02); }
        .v-thumb { width: 100%; aspect-ratio: 16/9; border-radius: 12px; background: #222; object-fit: cover; }
        .v-title { font-weight: 500; font-size: 15px; margin-top: 10px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* OVERLAYS */
        #watch-overlay { position: fixed; inset: 0; background: var(--bg); z-index: 2000; display: none; overflow-y: auto; padding-top: 20px; }
        .watch-grid { max-width: 1280px; margin: 0 auto; display: grid; grid-template-columns: 1fr 350px; gap: 24px; padding: 20px; }
        
        @media (max-width: 1000px) { .sidebar { display: none; } .main-wrapper { margin-left: 0; } .watch-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<header>
    <div style="display:flex; align-items:center; gap:20px; cursor:pointer;" onclick="setAlgo('genel')">
        <i class="fas fa-bars"></i>
        <div style="font-size:20px; font-weight:bold; letter-spacing:-1px;"><i class="fab fa-youtube" style="color:var(--yt-red)"></i> YouTube<sup>TR</sup></div>
    </div>
    <div class="search-box">
        <input type="text" id="search-input" placeholder="Ara...">
        <button onclick="performSearch()"><i class="fas fa-search"></i></button>
    </div>
    <div style="display:flex; gap:15px; align-items:center;">
        <i class="fas fa-video"></i><i class="fas fa-bell"></i>
        <div style="width:32px; height:32px; border-radius:50%; background: #444;"></div>
    </div>
</header>

<div class="sidebar">
    <div class="side-item active" id="btn-home" onclick="setAlgo('genel', this)"><i class="fas fa-home"></i> Ana Sayfa</div>
    <div class="side-item" id="btn-trend" onclick="setAlgo('trend', this)"><i class="fas fa-fire"></i> Trendler</div>
    <div class="side-item" id="btn-music" onclick="setAlgo('müzik', this)"><i class="fas fa-music"></i> Müzik</div>
    <div class="side-item" id="btn-game" onclick="setAlgo('oyun', this)"><i class="fas fa-gamepad"></i> Oyun</div>
    <div class="side-item" id="btn-tech" onclick="setAlgo('teknoloji', this)"><i class="fas fa-microchip"></i> Teknoloji</div>
    <div class="side-sep"></div>
    <div class="side-item"><i class="fas fa-history"></i> Geçmiş</div>
    <div class="side-item"><i class="fas fa-clock"></i> Daha sonra izle</div>
</div>

<main class="main-wrapper" id="scroll-target">
    <h2 id="section-title" style="margin-bottom: 20px; font-size: 20px;">Sizin için önerilenler</h2>
    <div class="video-grid" id="main-grid"></div>
    <div id="loader" style="text-align:center; padding:40px; display:none;"><i class="fas fa-spinner fa-spin fa-2x"></i></div>
</main>

<div id="watch-overlay">
    <div style="padding: 0 20px 20px 20px;"><button onclick="closeWatch()" style="background:none; color:white; border:none; cursor:pointer; font-size:18px;"><i class="fas fa-arrow-left"></i></button></div>
    <div class="watch-grid">
        <div id="video-side">
            <div id="player" style="width:100%; aspect-ratio:16/9; background:black; border-radius:12px;"></div>
            <h1 id="v-title" style="margin-top:15px; font-size:20px;"></h1>
        </div>
        <div id="rec-side"></div>
    </div>
</div>

<script>
    const API_KEY = 'AIzaSyDkaygARzpXfIXlozjyppLdXsPoE-mq1gg';
    let currentMode = 'genel';
    let pageToken = '';

    // ANA FONKSİYON: SOL BUTONLARA GÖRE İÇERİK DEĞİŞTİRME
    async function setAlgo(mode, element) {
        currentMode = mode;
        pageToken = '';
        document.getElementById('main-grid').innerHTML = '';
        
        // Menüdeki aktiflik görselini değiştir
        document.querySelectorAll('.side-item').forEach(el => el.classList.remove('active'));
        if(element) element.classList.add('active');

        // Başlığı güncelle
        const titles = { 'genel': 'Sizin için önerilenler', 'trend': 'Trend Videolar', 'müzik': 'Popüler Müzikler', 'oyun': 'Oyun Dünyası', 'teknoloji': 'Teknoloji ve Bilim' };
        document.getElementById('section-title').innerText = titles[mode];

        fetchContent();
    }

    async function fetchContent() {
        let query = "popüler videolar -çocuk -kids";
        if(currentMode === 'trend') query = "trend videolar türkiye -çocuk";
        if(currentMode === 'müzik') query = "official music video 2024 -çocuk";
        if(currentMode === 'oyun') query = "gaming walkthrough 2024 -çocuk";
        if(currentMode === 'teknoloji') query = "technology reviews -çocuk";

        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${query}&type=video&pageToken=${pageToken}&key=${API_KEY}`);
        const data = await res.json();
        pageToken = data.nextPageToken || '';
        
        render(data.items);
    }

    function render(items) {
        const grid = document.getElementById('main-grid');
        items.forEach(item => {
            grid.innerHTML += `
                <div class="v-card" onclick="openWatch('${item.id.videoId}', '${item.snippet.title.replace(/'/g,"")}')">
                    <img src="${item.snippet.thumbnails.high.url}" class="v-thumb">
                    <div class="v-title">${item.snippet.title}</div>
                    <div style="color:#aaa; font-size:13px; margin-top:5px;">${item.snippet.channelTitle}</div>
                </div>`;
        });
    }

    function openWatch(id, title) {
        document.getElementById('watch-overlay').style.display = 'block';
        document.getElementById('player').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${id}?autoplay=1" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
        document.getElementById('v-title').innerText = title;
    }

    function closeWatch() {
        document.getElementById('watch-overlay').style.display = 'none';
        document.getElementById('player').innerHTML = '';
    }

    function performSearch() {
        const q = document.getElementById('search-input').value;
        if(!q) return;
        currentMode = 'arama';
        document.getElementById('main-grid').innerHTML = '';
        document.getElementById('section-title').innerText = `"${q}" için sonuçlar`;
        fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${q} -çocuk&type=video&key=${API_KEY}`)
            .then(r => r.json()).then(d => render(d.items));
    }

    // İlk açılış
    fetchContent();
</script>
</body>
</html>
