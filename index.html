<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Pro - API Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: #0f0f0f; color: white; font-family: Roboto, Arial, sans-serif; overflow-x: hidden; }

        /* Header */
        header { height: 56px; padding: 0 16px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: #0f0f0f; z-index: 100; }
        .logo { display: flex; align-items: center; gap: 4px; font-weight: bold; font-size: 18px; cursor: pointer; }
        .logo i { color: red; font-size: 24px; }
        .search-bar { background: #222; padding: 8px 20px; border-radius: 20px; width: 40%; border: 1px solid #333; color: #888; }

        .main-content { padding: 20px; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
        
        /* Video Kartı */
        .v-card { cursor: pointer; margin-bottom: 20px; }
        .v-thumb { width: 100%; aspect-ratio: 16/9; background: #222; border-radius: 12px; object-fit: cover; margin-bottom: 12px; }
        .v-info { display: flex; gap: 12px; }
        .v-avatar { width: 36px; height: 36px; background: #333; border-radius: 50%; flex-shrink: 0; }
        .v-text h4 { font-size: 16px; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .v-text p { font-size: 14px; color: #aaa; }

        /* Shorts Bölümü (API Destekli) */
        .shorts-section { margin: 30px 0; padding: 20px 0; border-top: 4px solid #222; border-bottom: 4px solid #222; }
        .shorts-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; font-size: 20px; font-weight: bold; }
        .shorts-container { display: flex; gap: 12px; overflow-x: auto; scrollbar-width: none; padding-bottom: 10px; }
        .short-item { min-width: 200px; aspect-ratio: 9/16; background: #000; border-radius: 12px; position: relative; overflow: hidden; cursor: pointer; }
        .short-item iframe { width: 100%; height: 100%; border: none; pointer-events: none; transform: scale(1.1); }
        .short-overlay { position: absolute; inset: 0; background: linear-gradient(transparent 70%, rgba(0,0,0,0.8)); z-index: 2; }
        .short-title { position: absolute; bottom: 10px; left: 10px; font-size: 13px; font-weight: 500; z-index: 3; padding-right: 5px; }

        /* İzleme Ekranı (Görseldeki YouTube Layout) */
        #watch-page { display: none; padding: 20px; max-width: 1600px; margin: 0 auto; gap: 24px; }
        .player-col { flex: 3; }
        .side-col { flex: 1; display: flex; flex-direction: column; gap: 12px; }
        .video-frame { width: 100%; aspect-ratio: 16/9; border-radius: 12px; overflow: hidden; background: #000; }
        .video-frame iframe { width: 100%; height: 100%; border: none; }
        
        .v-title-big { font-size: 20px; font-weight: bold; margin: 15px 0; }
        .v-meta-bar { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .chan-box { display: flex; align-items: center; gap: 12px; }
        .sub-btn { background: white; color: black; padding: 10px 20px; border-radius: 20px; font-weight: bold; border: none; cursor: pointer; }
        .util-btn { background: #272727; padding: 8px 16px; border-radius: 20px; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 8px; }

        @media (max-width: 1100px) { #watch-page { flex-direction: column; } }
    </style>
</head>
<body>

<header>
    <div class="logo" onclick="location.reload()"><i class="fab fa-youtube"></i> YouTube<sup>TR</sup></div>
    <div class="search-bar">Ara</div>
    <div class="v-avatar"></div>
</header>

<main id="main-view" class="main-content">
    <div id="algo-grid-1" class="video-grid"></div>

    <div class="shorts-section">
        <div class="shorts-header"><i class="fas fa-bolt" style="color:red"></i> Shorts</div>
        <div class="shorts-container" id="shorts-list">
            </div>
    </div>

    <div id="algo-grid-2" class="video-grid"></div>
</main>

<div id="watch-page">
    <div class="player-col">
        <div class="video-frame" id="player-container"></div>
        <h1 class="v-title-big" id="v-title">Video Başlığı</h1>
        <div class="v-meta-bar">
            <div class="chan-box">
                <div class="v-avatar" style="width: 40px; height: 40px;"></div>
                <div>
                    <p id="v-channel" style="font-weight: bold;"></p>
                    <p style="font-size: 12px; color: #aaa;">1.43 Mn abone</p>
                </div>
                <button class="sub-btn">Abone ol</button>
            </div>
            <div style="display:flex; gap:8px;">
                <div class="util-btn"><i class="fas fa-thumbs-up"></i> 32 B</div>
                <div class="util-btn"><i class="fas fa-share"></i> Paylaş</div>
                <div class="util-btn"><i class="fas fa-download"></i> İndir</div>
            </div>
        </div>
    </div>
    <div class="side-col" id="side-rec"></div>
</div>

<script>
    const API_KEY = 'AIzaSyDkaygARzpXfIXlozjyppLdXsPoE-mq1gg';

    // 1. Ana Sayfa Algoritması (Karışık İçerik)
    async function fetchHome() {
        const categories = ['müzik', 'gaming', 'eğitim', 'haber', 'vlog'];
        const randomQ = categories[Math.floor(Math.random() * categories.length)];
        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${randomQ}&type=video&key=${API_KEY}`);
        const data = await res.json();
        
        const g1 = document.getElementById('algo-grid-1');
        const g2 = document.getElementById('algo-grid-2');

        data.items.forEach((item, i) => {
            const card = `
                <div class="v-card" onclick="playVideo('${item.id.videoId}', '${item.snippet.title.replace(/'/g, "")}', '${item.snippet.channelTitle}')">
                    <img src="${item.snippet.thumbnails.high.url}" class="v-thumb">
                    <div class="v-info">
                        <div class="v-avatar"></div>
                        <div class="v-text">
                            <h4>${item.snippet.title}</h4>
                            <p>${item.snippet.channelTitle} • 142B izlenme</p>
                        </div>
                    </div>
                </div>`;
            i < 4 ? g1.innerHTML += card : g2.innerHTML += card;
        });
    }

    // 2. Shorts Bölümü (YouTube'dan Dikey Videolar)
    async function fetchShorts() {
        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=8&q=shorts+türkçe+trend&type=video&videoDuration=short&key=${API_KEY}`);
        const data = await res.json();
        const container = document.getElementById('shorts-list');

        data.items.forEach(item => {
            container.innerHTML += `
                <div class="short-item" onclick="playVideo('${item.id.videoId}', '${item.snippet.title.replace(/'/g, "")}', '${item.snippet.channelTitle}')">
                    <div class="short-overlay"></div>
                    <iframe src="https://www.youtube.com/embed/${item.id.videoId}?controls=0&modestbranding=1&rel=0&showinfo=0"></iframe>
                    <div class="short-title">${item.snippet.title.substring(0, 40)}...</div>
                </div>`;
        });
    }

    // 3. İzleme Sayfasına Geçiş
    function playVideo(id, title, channel) {
        document.getElementById('main-view').style.display = 'none';
        const watch = document.getElementById('watch-page');
        watch.style.display = 'flex';

        document.getElementById('player-container').innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1&rel=0" allow="autoplay; fullscreen"></iframe>`;
        document.getElementById('v-title').innerText = title;
        document.getElementById('v-channel').innerText = channel;
        
        loadSidebarRecommendations();
        window.scrollTo(0, 0);
    }

    async function loadSidebarRecommendations() {
        const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=10&q=popüler&type=video&key=${API_KEY}`);
        const data = await res.json();
        const side = document.getElementById('side-rec');
        side.innerHTML = "";
        data.items.forEach(item => {
            side.innerHTML += `
                <div style="display:flex; gap:8px; cursor:pointer; margin-bottom:10px;" onclick="playVideo('${item.id.videoId}', '${item.snippet.title.replace(/'/g, "")}', '${item.snippet.channelTitle}')">
                    <img src="${item.snippet.thumbnails.medium.url}" style="width:160px; height:90px; border-radius:8px; object-fit:cover;">
                    <div style="font-size:12px;">
                        <h4 style="margin-bottom:4px; display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;">${item.snippet.title}</h4>
                        <p style="color:#aaa;">${item.snippet.channelTitle}</p>
                    </div>
                </div>`;
        });
    }

    // Başlat
    fetchHome();
    fetchShorts();
</script>
</body>
</html>
