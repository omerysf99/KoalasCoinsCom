<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reels Player v4</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #0b0b0b;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; font-family: 'Segoe UI', sans-serif; color: white;
            overflow: hidden;
        }

        /* Telefon Ã‡erÃ§evesi */
        .reels-wrapper {
            width: 100%; max-width: 380px; height: 90vh;
            position: relative; background: #000;
            border-radius: 40px; overflow: hidden; border: 6px solid #222;
            box-shadow: 0 25px 50px rgba(0,0,0,0.8);
        }

        .reels-container {
            height: 100%; overflow-y: scroll;
            scroll-snap-type: y mandatory; scroll-behavior: smooth;
        }
        .reels-container::-webkit-scrollbar { display: none; }

        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; }
        video { width: 100%; height: 100%; object-fit: cover; cursor: pointer; }

        /* SaÄŸ Ãœst Ses Ayar Butonu */
        .volume-toggle-btn {
            position: absolute; top: 25px; right: 20px;
            width: 45px; height: 45px; border-radius: 50%;
            background: rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.2);
            color: white; font-size: 20px; cursor: pointer; z-index: 101;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(8px);
        }

        /* AÃ§Ä±lÄ±r Ses Paneli */
        .volume-panel {
            position: absolute; top: 80px; right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px 10px; border-radius: 20px;
            display: flex; flex-direction: column; align-items: center;
            gap: 12px; z-index: 100;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0; transform: scale(0.5) translateY(-20px);
            pointer-events: none;
        }

        .volume-panel.active {
            opacity: 1; transform: scale(1) translateY(0);
            pointer-events: all;
        }

        .volume-slider {
            -webkit-appearance: slider-vertical;
            width: 12px; height: 150px; cursor: pointer;
        }

        /* Alt Bilgi AlanÄ± */
        .info-overlay { 
            position: absolute; bottom: 30px; left: 20px; 
            pointer-events: none; text-shadow: 0 2px 10px rgba(0,0,0,0.9);
        }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <button class="volume-toggle-btn" onclick="toggleVolumePanel()">ðŸ”Š</button>

    <div class="volume-panel" id="volumePanel">
        <input type="range" class="volume-slider" min="0" max="1" step="0.01" value="0.5" oninput="updateVolume(this.value)">
        <span id="volText" style="font-size: 12px; font-weight: bold;">50%</span>
    </div>

    <div class="reels-container" id="reelsContainer">
        </div>
</div>

<script>
    // KlasÃ¶rÃ¼ndeki 4 video
    const videoList = ['reels1.mp4', 'reels2.mp4', 'reels3.mp4', 'reels4.mp4'];
    const container = document.getElementById('reelsContainer');
    let globalVolume = 0.5;

    // Ses panelini aÃ§/kapat
    function toggleVolumePanel() {
        document.getElementById('volumePanel').classList.toggle('active');
    }

    // Ses seviyesini gÃ¼ncelle
    function updateVolume(val) {
        globalVolume = val;
        document.getElementById('volText').innerText = Math.round(val * 100) + "%";
        document.querySelectorAll('video').forEach(v => {
            v.volume = val;
            v.muted = (val == 0);
        });
    }

    // Video kartÄ± oluÅŸtur
    function renderVideos() {
        videoList.forEach((file, index) => {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
                <video src="${file}" loop playsinline onclick="this.paused ? this.play() : this.pause()"></video>
                <div class="info-overlay">
                    <h4 style="margin:0;">Reels #${index + 1}</h4>
                    <p style="margin:5px 0 0; font-size:13px; opacity:0.7;">Sonsuz DÃ¶ngÃ¼ Aktif</p>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // KaydÄ±rma ve Otomatik Oynatma
    container.addEventListener('scroll', () => {
        // Sonsuz dÃ¶ngÃ¼: Sona gelince tekrar yÃ¼kle
        if (container.scrollTop + container.clientHeight >= container.scrollHeight - 10) {
            renderVideos();
        }

        const videos = document.querySelectorAll('video');
        videos.forEach(v => {
            const pos = v.getBoundingClientRect();
            // Video tam ekrandaysa oynat, deÄŸilse durdur
            if (pos.top >= -100 && pos.bottom <= window.innerHeight + 100) {
                v.play().catch(() => {});
                v.volume = globalVolume;
            } else {
                v.pause();
            }
        });
    });

    // BaÅŸlat
    renderVideos();

    // TarayÄ±cÄ± kÄ±sÄ±tlamasÄ±nÄ± aÅŸmak iÃ§in ilk tÄ±kla sesi aktif et
    window.addEventListener('click', () => {
        document.querySelectorAll('video').forEach(v => v.muted = false);
    }, { once: true });
</script>

</body>
</html>
