<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reels Player - 4 Video</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #0b0b0b;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; font-family: 'Segoe UI', sans-serif; color: white;
        }

        /* Telefon GÃ¶rÃ¼nÃ¼mÃ¼ */
        .reels-wrapper {
            width: 100%; max-width: 380px; height: 88vh;
            position: relative; background: #000;
            border-radius: 35px; overflow: hidden; border: 5px solid #222;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9);
        }

        .reels-container {
            height: 100%; overflow-y: scroll;
            scroll-snap-type: y mandatory; scroll-behavior: smooth;
        }
        .reels-container::-webkit-scrollbar { display: none; }

        .video-card { height: 100%; width: 100%; scroll-snap-align: start; position: relative; }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* Ses AÃ§ma TuÅŸu */
        .volume-toggle-btn {
            position: absolute; top: 25px; right: 20px;
            width: 45px; height: 45px; border-radius: 50%;
            background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3);
            color: white; font-size: 20px; cursor: pointer; z-index: 101;
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }

        /* Ses Paneli */
        .volume-panel {
            position: absolute; top: 80px; right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px 10px; border-radius: 20px;
            display: flex; flex-direction: column; align-items: center;
            gap: 12px; z-index: 100;
            transition: all 0.3s ease;
            opacity: 0; transform: scale(0.8);
            pointer-events: none;
        }

        .volume-panel.active {
            opacity: 1; transform: scale(1);
            pointer-events: all;
        }

        .volume-slider {
            -webkit-appearance: slider-vertical;
            width: 12px; height: 140px; cursor: pointer;
        }

        .info-overlay { 
            position: absolute; bottom: 30px; left: 20px; 
            pointer-events: none; text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
    </style>
</head>
<body>

<div class="reels-wrapper">
    <button class="volume-toggle-btn" onclick="toggleVolumePanel()">ðŸ”Š</button>

    <div class="volume-panel" id="volumePanel">
        <input type="range" class="volume-slider" min="0" max="1" step="0.05" value="0.5" oninput="changeVolume(this.value)">
        <span id="volPercent" style="font-size: 12px; font-weight: bold;">50%</span>
    </div>

    <div class="reels-container" id="reelsContainer">
        </div>
</div>

<script>
    // reeels4.mp4 diziye eklendi!
    const videoFiles = ['reels1.mp4', 'reels2.mp4', 'reels3.mp4', 'reels4.mp4'];
    const container = document.getElementById('reelsContainer');
    let currentVolume = 0.5;

    function toggleVolumePanel() {
        document.getElementById('volumePanel').classList.toggle('active');
    }

    function changeVolume(val) {
        currentVolume = val;
        document.getElementById('volPercent').innerText = Math.round(val * 100) + "%";
        const vids = document.querySelectorAll('video');
        vids.forEach(v => {
            v.volume = val;
            v.muted = val == 0;
        });
    }

    function createVideo(src, id) {
        const div = document.createElement('div');
        div.className = 'video-card';
        div.innerHTML = `
            <video src="${src}" loop playsinline onclick="this.paused ? this.play() : this.pause()"></video>
            <div class="info-overlay">
                <h4 style="margin:0;">@KullanÄ±cÄ±</h4>
                <p style="margin:5px 0 0; font-size:14px;">Video Ä°Ã§eriÄŸi #${id}</p>
            </div>`;
        return div;
    }

    function loadContent() {
        videoFiles.forEach((file, i) => {
            container.appendChild(createVideo(file, i + 1));
        });
    }

    // KaydÄ±rma Takibi (Oynat/Durdur ve Sonsuz DÃ¶ngÃ¼)
    container.addEventListener('scroll', () => {
        // Sonsuz dÃ¶ngÃ¼: Sona gelince tekrar yÃ¼kle
        if (container.scrollTop + container.clientHeight >= container.scrollHeight - 20) {
            loadContent();
        }
        
        const videos = document.querySelectorAll('video');
        videos.forEach(v => {
            const rect = v.getBoundingClientRect();
            // Video gÃ¶rÃ¼nÃ¼r alandaysa oynat
            if (rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) + 100) {
                v.play().catch(() => {});
                v.volume = currentVolume;
            } else {
                v.pause();
            }
        });
    });

    // Sayfa hazÄ±r olduÄŸunda videolarÄ± bas
    loadContent();

    // Ä°lk tÄ±klamada ses kÄ±sÄ±tlamasÄ±nÄ± kaldÄ±r
    window.addEventListener('click', () => {
        const vids = document.querySelectorAll('video');
        vids.forEach(v => v.muted = false);
    }, { once: true });
</script>

</body>
</html>
