<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Pro - Ultimate Interactive Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://adexora.com/cdn/ads.js?id=1624"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --yt-red: #ff0000; --yt-bg: #0f0f0f; --yt-surface: #1e1e1e; --yt-border: #272727; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--yt-bg); color: white; margin: 0; overflow-x: hidden; }
        
        /* Skeleton & Animasyonlar */
        .skeleton { background: linear-gradient(90deg, #1a1a1a 25%, #252525 50%, #1a1a1a 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        /* Video Mimarisi */
        .video-card { transition: 0.3s; cursor: pointer; }
        .video-card:hover .thumb-img { border-radius: 0; transform: scale(1.02); }
        .thumb-img { aspect-ratio: 16/9; border-radius: 12px; object-fit: cover; transition: 0.3s; width: 100%; }

        /* Shorts Dikey Akƒ±≈ü */
        .shorts-container { height: calc(100vh - 56px); scroll-snap-type: y mandatory; overflow-y: scroll; scroll-behavior: smooth; }
        .short-item { height: 100%; scroll-snap-align: start; display: flex; justify-content: center; align-items: center; position: relative; }
        .short-video-box { height: 92%; aspect-ratio: 9/16; background: #000; border-radius: 16px; overflow: hidden; border: 1px solid #333; }

        /* Sidebar Geli≈ümi≈ü */
        .sidebar-link { display: flex; align-items: center; gap: 20px; padding: 12px 20px; border-radius: 12px; cursor: pointer; color: #aaa; transition: 0.2s; }
        .sidebar-link:hover, .sidebar-link.active { background: #272727; color: white; }
        .active { font-weight: bold; border-left: 4px solid var(--yt-red); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f0f0f; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full bg-[#0f0f0f] flex items-center justify-between px-6 h-14 z-[1000] border-b border-[#272727]">
        <div class="flex items-center gap-4">
            <button class="text-xl hover:bg-[#272727] p-2 rounded-full">‚ò∞</button>
            <div class="flex items-center gap-1 cursor-pointer" onclick="router.navigate('home')">
                <span class="text-red-600 text-3xl font-bold">‚ñ∂</span>
                <span class="text-xl font-bold tracking-tighter">YouTube</span>
            </div>
        </div>
        <div class="flex flex-1 max-w-[650px] mx-10">
            <div class="flex w-full items-center bg-[#121212] border border-[#303030] rounded-l-full px-5 py-2 focus-within:border-blue-500">
                <input id="searchInp" type="text" placeholder="Ara" class="bg-transparent w-full outline-none text-white text-sm" onkeypress="if(event.key==='Enter') app.search()">
            </div>
            <button onclick="app.search()" class="bg-[#222] border border-[#303030] border-l-0 px-6 rounded-r-full hover:bg-[#333]">üîç</button>
        </div>
        <div class="flex items-center gap-4">
            <div class="w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center text-xs font-bold">TR</div>
        </div>
    </nav>

    <div class="flex pt-14">
        <aside class="w-64 fixed left-0 h-screen bg-[#0f0f0f] p-3 border-r border-[#272727] hidden lg:block overflow-y-auto">
            <div onclick="router.navigate('home')" id="nav-home" class="sidebar-link active">üè† <span>Ana Sayfa</span></div>
            <div onclick="router.navigate('shorts')" id="nav-shorts" class="sidebar-link">üéûÔ∏è <span>Shorts</span></div>
            <div onclick="router.navigate('subs')" id="nav-subs" class="sidebar-link">üë• <span>Abonelikler</span></div>
            <hr class="border-[#272727] my-4">
            <p class="text-[11px] text-gray-500 font-bold px-4 mb-2">KE≈ûFET</p>
            <div onclick="app.fetchByCategory('Trend')" class="sidebar-link">üî• <span>Trendler</span></div>
            <div onclick="app.fetchByCategory('M√ºzik')" class="sidebar-link">üéµ <span>M√ºzik</span></div>
            <div onclick="app.fetchByCategory('Oyun')" class="sidebar-link">üéÆ <span>Oyun</span></div>
            <hr class="border-[#272727] my-4">
            <div id="sub-list" class="flex flex-col gap-1">
                </div>
        </aside>

        <main class="flex-1 lg:ml-64 min-h-screen">
            
            <section id="view-home" class="p-6">
                <div id="video-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-x-6 gap-y-12"></div>
            </section>

            <section id="view-shorts" class="hidden">
                <div id="shorts-wrapper" class="shorts-container no-scrollbar"></div>
            </section>

            <section id="view-subs" class="hidden p-6 text-center mt-20">
                <h1 class="text-3xl font-bold">Aboneliklerin</h1>
                <p class="text-gray-400 mt-2">En sevdiƒüin kanallarƒ±n yeni videolarƒ± burada g√∂r√ºnecek.</p>
                <div id="subs-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 mt-10"></div>
            </section>

            <section id="view-watch" class="hidden p-4 lg:p-8">
                <div class="flex flex-col xl:flex-row gap-8 max-w-[1700px] mx-auto">
                    <div class="flex-1">
                        <div class="relative aspect-video bg-black rounded-2xl overflow-hidden group">
                            <div id="ad-layer" class="absolute inset-0 hidden bg-black/95 z-50 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 border-4 border-red-600 border-t-transparent rounded-full animate-spin"></div>
                                <span class="mt-4 font-bold tracking-widest">REKLAM DOƒûRULANIYOR (0.1s Hƒ±z)</span>
                            </div>
                            <iframe id="main-player" class="w-full h-full" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                        </div>

                        <h1 id="watch-title" class="text-2xl font-bold mt-6 leading-tight"></h1>
                        
                        <div class="flex flex-wrap items-center justify-between gap-4 mt-4 py-4 border-b border-[#272727]">
                            <div class="flex items-center gap-4 cursor-pointer" id="chan-trigger">
                                <img id="watch-chan-logo" src="" class="w-11 h-11 rounded-full border border-white/10">
                                <div>
                                    <h3 id="watch-chan-name" class="font-bold"></h3>
                                    <p id="watch-chan-subs" class="text-xs text-gray-400"></p>
                                </div>
                                <button class="ml-4 bg-white text-black px-5 py-2 rounded-full font-bold text-sm">Abone Ol</button>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="flex bg-[#272727] rounded-full overflow-hidden">
                                    <button onclick="app.like()" class="px-5 py-2 hover:bg-[#3f3f3f] flex items-center gap-2 border-r border-white/10">üëç <span id="v-likes">--</span></button>
                                    <button onclick="app.dislike()" class="px-5 py-2 hover:bg-[#3f3f3f]">üëé</button>
                                </div>
                                <button class="bg-[#272727] px-5 py-2 rounded-full hover:bg-[#3f3f3f] font-bold text-sm">Payla≈ü</button>
                            </div>
                        </div>

                        <div class="mt-8">
                            <h3 class="font-bold text-xl mb-6">Yorumlar</h3>
                            <div class="flex gap-4 mb-8">
                                <div class="w-10 h-10 bg-indigo-600 rounded-full flex-shrink-0 flex items-center justify-center font-bold">TR</div>
                                <div class="flex-1">
                                    <input type="text" placeholder="Yorum ekleyin..." class="w-full bg-transparent border-b border-[#272727] outline-none focus:border-white py-1 text-sm transition-all">
                                    <div class="flex justify-end gap-2 mt-2 opacity-0 hover:opacity-100 transition">
                                        <button class="text-sm px-4 py-2 hover:bg-[#272727] rounded-full">ƒ∞ptal</button>
                                        <button class="text-sm px-4 py-2 bg-blue-600 rounded-full font-bold">Yorum Yap</button>
                                    </div>
                                </div>
                            </div>
                            <div id="comment-list" class="flex flex-col gap-6">
                                </div>
                        </div>
                    </div>
                    
                    <div id="watch-sidebar" class="w-full xl:w-[400px] flex flex-col gap-4"></div>
                </div>
            </section>

        </main>
    </div>

    <script>
        const API_KEY = 'AIzaSyDkaygARzpXfIXlozjyppLdXsPoE-mq1gg';
        
        // --- ROUTING ENGINE ---
        const router = {
            navigate(view) {
                document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
                document.getElementById(`view-${view}`).classList.remove('hidden');
                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                if(document.getElementById(`nav-${view}`)) document.getElementById(`nav-${view}`).classList.add('active');
                
                app.stopAll();
                window.scrollTo(0,0);
                if(view === 'home') app.loadHome();
                if(view === 'shorts') app.loadShorts();
                if(view === 'subs') app.loadSubs();
            }
        };

        // --- CORE APP ENGINE ---
        const app = {
            currentSec: 0,
            timers: [],
            activeId: '',

            stopAll() {
                this.timers.forEach(t => clearInterval(t));
                this.timers = [];
                document.getElementById('main-player').src = "";
            },

            // ANA SAYFA - POP√úLER & KANAL VERƒ∞LERƒ∞YLE
            async loadHome() {
                this.fetchVideos("T√ºrkiye en √ßok izlenen pop√ºler videolar 2026");
            },

            async fetchVideos(q) {
                const grid = document.getElementById('video-grid');
                grid.innerHTML = Array(8).fill('<div class="h-60 skeleton rounded-xl"></div>').join('');
                
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=30&q=${q}&regionCode=TR&type=video&key=${API_KEY}`);
                const data = await res.json();
                
                // Shuffle Algoritmasƒ±
                const shuffled = data.items.sort(() => Math.random() - 0.5);

                grid.innerHTML = shuffled.map(v => `
                    <div class="video-card group">
                        <div class="relative" onclick="app.watch('${v.id.videoId}', '${v.snippet.channelId}')">
                            <img src="${v.snippet.thumbnails.high.url}" class="thumb-img">
                            <span class="absolute bottom-2 right-2 bg-black/80 px-2 py-0.5 rounded text-xs font-bold">14:02</span>
                        </div>
                        <div class="flex gap-3 mt-4">
                            <div class="w-10 h-10 rounded-full bg-[#222] border border-white/10 flex-shrink-0 overflow-hidden">
                                <img src="${v.snippet.thumbnails.default.url}" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <h3 onclick="app.watch('${v.id.videoId}', '${v.snippet.channelId}')" class="font-bold text-sm line-clamp-2 group-hover:text-red-500">${v.snippet.title}</h3>
                                <p class="text-xs text-gray-400 mt-2 hover:text-white">${v.snippet.channelTitle}</p>
                                <p class="text-[11px] text-gray-500">1.2 Mn izlenme ‚Ä¢ 2 g√ºn √∂nce</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            },

            // ƒ∞ZLEME - LIKE/YORUM VERƒ∞LERƒ∞ CANLI √áEKƒ∞Lƒ∞R
            async watch(id, chanId) {
                router.navigate('watch');
                this.activeId = id;
                this.currentSec = 0;

                // 1. Video & Kanal Detaylarƒ±nƒ± √áek
                const vRes = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${id}&key=${API_KEY}`);
                const vData = await vRes.json();
                const video = vData.items[0];

                const cRes = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${chanId}&key=${API_KEY}`);
                const cData = await cRes.json();
                const chan = cData.items[0];

                // Verileri Bas
                document.getElementById('watch-title').innerText = video.snippet.title;
                document.getElementById('v-likes').innerText = this.formatNum(video.statistics.likeCount);
                document.getElementById('watch-chan-name').innerText = chan.snippet.title;
                document.getElementById('watch-chan-logo').src = chan.snippet.thumbnails.default.url;
                document.getElementById('watch-chan-subs').innerText = this.formatNum(chan.statistics.subscriberCount) + " Abone";

                this.setPlayer(0);
                this.startAdEngine();
                this.loadComments(id);
                this.loadSuggestions(chan.snippet.title);
            },

            async loadComments(id) {
                const list = document.getElementById('comment-list');
                list.innerHTML = "Yorumlar y√ºkleniyor...";
                try {
                    const res = await fetch(`https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId=${id}&maxResults=20&key=${API_KEY}`);
                    const data = await res.json();
                    list.innerHTML = data.items.map(c => {
                        const cm = c.snippet.topLevelComment.snippet;
                        return `
                            <div class="flex gap-4">
                                <img src="${cm.authorProfileImageUrl}" class="w-10 h-10 rounded-full">
                                <div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-sm font-bold">${cm.authorDisplayName}</span>
                                        <span class="text-xs text-gray-500">3 saat √∂nce</span>
                                    </div>
                                    <p class="text-sm mt-1 text-gray-200">${cm.textDisplay}</p>
                                    <div class="flex items-center gap-4 mt-2 text-xs text-gray-400">
                                        <span class="cursor-pointer hover:text-white">üëç ${cm.likeCount}</span>
                                        <span class="cursor-pointer hover:text-white">Yanƒ±tla</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                } catch(e) { list.innerHTML = "Bu videoda yorumlar kapalƒ± olabilir."; }
            },

            // SHORTS MOTORU
            async loadShorts() {
                const wrap = document.getElementById('shorts-wrapper');
                wrap.innerHTML = '<div class="h-screen flex items-center justify-center font-bold text-2xl">Shorts Akƒ±≈üƒ± Hazƒ±rlanƒ±yor...</div>';
                
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=15&q=shorts+funny+trending&type=video&videoDuration=short&key=${API_KEY}`);
                const data = await res.json();
                
                wrap.innerHTML = data.items.map(s => `
                    <div class="short-item" data-id="${s.id.videoId}">
                        <div class="short-video-box" id="box-${s.id.videoId}"></div>
                        <div class="absolute right-4 bottom-20 flex flex-col gap-6 items-center">
                            <div class="flex flex-col items-center"><div class="p-3 bg-[#272727] rounded-full text-xl cursor-pointer hover:bg-[#3f3f3f]">üëç</div><span class="text-xs mt-1">1.2Mn</span></div>
                            <div class="flex flex-col items-center"><div class="p-3 bg-[#272727] rounded-full text-xl cursor-pointer hover:bg-[#3f3f3f]">üí¨</div><span class="text-xs mt-1">45K</span></div>
                            <div class="flex flex-col items-center"><div class="p-3 bg-[#272727] rounded-full text-xl cursor-pointer hover:bg-[#3f3f3f]">‚ÜóÔ∏è</div><span class="text-xs mt-1">Payla≈ü</span></div>
                        </div>
                    </div>
                `).join('');

                const observer = new IntersectionObserver(entries => {
                    entries.forEach(e => {
                        const id = e.target.getAttribute('data-id');
                        const box = document.getElementById(`box-${id}`);
                        if(e.isIntersecting) {
                            box.innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${id}?autoplay=1&controls=0&loop=1&playlist=${id}" frameborder="0"></iframe>`;
                        } else { box.innerHTML = ""; }
                    });
                }, { threshold: 0.8 });
                document.querySelectorAll('.short-item').forEach(i => observer.observe(i));
            },

            // REKLAM & SENKRON
            startAdEngine() {
                const tracker = setInterval(() => { this.currentSec += 0.1; }, 100);
                this.timers.push(tracker);

                const adKiller = setInterval(() => {
                    const point = this.currentSec;
                    this.stopAll();
                    document.getElementById('ad-layer').classList.remove('hidden');
                    
                    setTimeout(() => {
                        document.getElementById('ad-layer').classList.add('hidden');
                        this.currentSec = point;
                        this.setPlayer(point);
                        this.startAdEngine();
                    }, 4000);
                }, 70000);
                this.timers.push(adKiller);
            },

            setPlayer(s) {
                document.getElementById('main-player').src = `https://www.youtube.com/embed/${this.activeId}?autoplay=1&start=${Math.floor(s)}&rel=0`;
            },

            // TOOLS
            formatNum(n) {
                if(n >= 1000000) return (n/1000000).toFixed(1) + " Mn";
                if(n >= 1000) return (n/1000).toFixed(1) + " B";
                return n;
            },
            search() {
                const q = document.getElementById('searchInp').value;
                if(q) { router.navigate('home'); this.fetchVideos(q); }
            },
            fetchByCategory(c) { router.navigate('home'); this.fetchVideos(c); },
            like() { alert("Beƒüendin! (API √ºzerinden hesabƒ±na i≈ülendi sim√ºlasyonu)"); },
            dislike() { alert("Beƒüenmedin!"); }
        };

        // Ba≈ülat
        router.navigate('home');
    </script>
</body>
</html>
