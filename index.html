<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>KOALA ARCADE | ULTIMATE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Inter', sans-serif; user-select: none; }
        body { background-color: #000; color: #fff; overflow: hidden; height: 100vh; position: fixed; width: 100%; }

        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(15px); }
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px 20px 140px; }
        .page.active { display: block; animation: fadeIn 0.2s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Checking Screen */
        #checking-screen { position: fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; display:flex; flex-direction:column; padding:40px 24px; justify-content:space-between; }
        .check-card { background:#09090b; border:1px solid #111; padding:20px; border-radius:24px; margin-bottom:12px; display:flex; align-items:center; justify-content:space-between; opacity:0; transform:translateY(10px); transition:0.4s; }
        .check-card.show { opacity:1; transform:translateY(0); }
        .dot { width:10px; height:10px; border-radius:50%; background:#222; }
        .dot.done { background:#fff; box-shadow:0 0 10px #fff; }

        /* Tap Mechanism */
        .tap-area { display: flex; flex-direction: column; align-items: center; padding-bottom: 20px; }
        .tap-circle { width: 240px; height: 240px; margin: 15px auto; position: relative; }
        .tap-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 6px solid #111; transition: 0.1s; touch-action: manipulation; }
        .tap-img:active { transform: scale(0.92); border-color: #fff; }

        /* Task Panel Under Tap */
        .task-inline-panel { width: 100%; margin-top: 25px; }
        .task-card-mini { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 20px; padding: 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }

        /* Navigation */
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 90px; background: #050505; border-top: 1px solid #111; display: grid; grid-template-columns: repeat(4, 1fr); padding-bottom: 20px; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; font-size: 10px; font-weight: 800; text-transform: uppercase; }
        .nav-item.active { color: #fff; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }

        .energy-bar { height: 8px; background: #0a0a0a; border-radius: 20px; overflow: hidden; border: 1px solid #151515; }
        #e-fill { height: 100%; width: 100%; background: #fff; transition: 0.2s linear; }

        .f-text { position: absolute; color: white; font-weight: 900; font-size: 32px; pointer-events: none; animation: floatUp 0.6s ease-out forwards; z-index: 2000; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }

        #ad-view { position: fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:10000; display:none; flex-direction:column; align-items:center; justify-content:center; }
    </style>
</head>
<body>

    <div id="ad-view">
        <div class="text-center">
            <div class="w-12 h-12 border-2 border-white/10 border-t-white rounded-full animate-spin mx-auto mb-6"></div>
            <h2 id="ad-sec" class="text-7xl font-black italic">10</h2>
            <p class="text-zinc-600 font-bold text-[10px] uppercase tracking-widest mt-4">Loading Video...</p>
        </div>
    </div>

    <div id="checking-screen">
        <div class="text-center mt-6">
            <h1 class="text-2xl font-black italic tracking-tighter uppercase">Koala Arcade</h1>
            <p class="text-zinc-600 text-xs font-bold uppercase tracking-widest">System Booting</p>
        </div>
        <div id="check-list">
            <div class="check-card" id="s1"><span>Server Link</span><div class="dot"></div></div>
            <div class="check-card" id="s2"><span>Energy Grid</span><div class="dot"></div></div>
        </div>
        <div id="check-result" class="hidden text-center">
            <h2 id="veteran-years" class="text-7xl font-black">0</h2>
            <p class="text-zinc-500 font-black uppercase text-xs">Year Veteran Bonus</p>
            <div class="mt-4 text-white font-black text-xl">+<span id="welcome-reward">0</span> $KOALA</div>
        </div>
        <div class="w-full">
            <button onclick="startCheck()" id="btn-check" class="w-full bg-white text-black p-5 rounded-3xl font-black uppercase text-sm">Check Profile</button>
            <button onclick="enterApp()" id="btn-claim" class="w-full bg-white text-black p-5 rounded-3xl font-black uppercase text-sm hidden">Claim & Enter</button>
        </div>
    </div>

    <div id="main-app" class="hidden">
        
        <div id="p-earn" class="page active">
            <div class="tap-area">
                <div class="text-center mb-4">
                    <p class="text-zinc-600 font-black text-[10px] uppercase tracking-[0.4em]">Balance</p>
                    <h1 id="bal-txt" class="text-5xl font-black tracking-tighter">0</h1>
                </div>

                <div class="tap-circle">
                    <img src="coinkoala.jpg" id="koala-btn" class="tap-img" onclick="handleTap(event)">
                </div>

                <div class="w-full max-w-[240px]">
                    <div class="flex justify-between items-center mb-2 px-1">
                        <span class="text-[9px] font-black text-zinc-500 uppercase">âš¡ <span id="e-txt">1000/1000</span></span>
                    </div>
                    <div class="energy-bar"><div id="e-fill"></div></div>
                </div>
            </div>

            <div class="task-inline-panel">
                <p class="text-zinc-600 font-black text-[10px] uppercase tracking-widest mb-4 border-b border-zinc-900 pb-2">Active Quests</p>
                
                <div class="task-card-mini" onclick="triggerAd()">
                    <div class="flex items-center gap-3">
                        <i class="fa-solid fa-play text-yellow-500"></i>
                        <div><p class="text-xs font-bold">Watch Video</p><p class="text-[9px] text-zinc-500">+1 $KOALA</p></div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-zinc-800 text-xs"></i>
                </div>

                <div class="task-card-mini" onclick="openTG()">
                    <div class="flex items-center gap-3">
                        <i class="fa-brands fa-telegram text-blue-400"></i>
                        <div><p class="text-xs font-bold">Join Channel</p><p class="text-[9px] text-zinc-500">+50k $KOALA</p></div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-zinc-800 text-xs"></i>
                </div>
            </div>
        </div>

        <div id="p-stats" class="page">
            <h2 class="text-3xl font-black italic mb-8 uppercase tracking-tighter">Global Stats</h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="glass p-5 rounded-3xl">
                    <p class="text-zinc-600 text-[10px] font-black uppercase mb-1">Total Users</p>
                    <p class="text-xl font-black">1.2M+</p>
                </div>
                <div class="glass p-5 rounded-3xl">
                    <p class="text-zinc-600 text-[10px] font-black uppercase mb-1">Total Taps</p>
                    <p class="text-xl font-black">849B</p>
                </div>
                <div class="glass p-5 rounded-3xl col-span-2">
                    <p class="text-zinc-600 text-[10px] font-black uppercase mb-1">Circulating Supply</p>
                    <p class="text-2xl font-black text-yellow-500">42,000,000,000</p>
                </div>
            </div>
            <div class="mt-8 glass p-6 rounded-[35px] text-center italic text-zinc-500 text-xs font-bold">
                "The more you tap, the closer we get to TGE."
            </div>
        </div>

        <div id="p-friends" class="page">
            <div class="text-center mt-10">
                <h2 class="text-4xl font-black italic mb-2">INVITE</h2>
                <p class="text-zinc-500 text-sm mb-10 px-6">Earn 10% from every friend's mining activity.</p>
                <div class="glass p-6 rounded-[30px] mb-8">
                    <p id="ref-preview" class="text-[10px] font-mono text-zinc-500 truncate">t.me/KoalasUsdt_Bot?start=r...</p>
                </div>
                <button onclick="shareLink()" class="w-full bg-white text-black p-5 rounded-3xl font-black uppercase text-sm">Share Invite Link</button>
            </div>
        </div>

        <div id="p-drop" class="page text-center">
            <h2 class="text-3xl font-black italic mb-10 uppercase">Connect</h2>
            <div id="w-setup">
                <i class="fa-solid fa-wallet text-5xl mb-6 text-zinc-800"></i>
                <input type="text" id="w-input" class="w-full bg-zinc-950 border border-zinc-900 p-5 rounded-2xl text-white font-bold text-xs mb-4 outline-none" placeholder="UQ... TON Address">
                <button onclick="saveW()" class="w-full bg-white text-black p-5 rounded-2xl font-black uppercase text-sm">Link Wallet</button>
            </div>
            <div id="w-done" class="hidden">
                <i class="fa-solid fa-circle-check text-6xl text-green-500 mb-6"></i>
                <p id="w-preview" class="text-zinc-600 text-[10px] font-mono mb-6"></p>
                <button onclick="resetW()" class="text-zinc-500 text-xs font-bold uppercase underline">Disconnect</button>
            </div>
        </div>

        <nav class="nav-bar">
            <div class="nav-item active" onclick="tab('earn', this)"><i class="fa-solid fa-coins"></i><span>Earn</span></div>
            <div class="nav-item" onclick="tab('stats', this)"><i class="fa-solid fa-chart-simple"></i><span>Stats</span></div>
            <div class="nav-item" onclick="tab('friends', this)"><i class="fa-solid fa-users"></i><span>Friends</span></div>
            <div class="nav-item" onclick="tab('drop', this)"><i class="fa-solid fa-parachute-box"></i><span>Airdrop</span></div>
        </nav>
    </div>

    <script>
        let state = {
            bal: parseFloat(localStorage.getItem('k_bal')) || 0,
            energy: parseFloat(localStorage.getItem('k_energy')) || 1000,
            lastSync: parseInt(localStorage.getItem('k_sync')) || Date.now(),
            wallet: localStorage.getItem('k_wallet') || null,
            uid: localStorage.getItem('k_uid') || Math.floor(Math.random()*900000 + 100000),
            isClaimed: localStorage.getItem('k_clm') === 'true'
        };

        const MAX_E = 1000;
        const REFILL = MAX_E / 86400;

        window.onload = () => {
            localStorage.setItem('k_uid', state.uid);
            document.getElementById('ref-preview').innerText = `t.me/KoalasUsdt_Bot?start=r${state.uid}`;
            syncEnergy(); refreshUI(); checkW();
            setInterval(autoRefill, 1000);
        };

        // --- CORE FUNCTIONS ---
        function handleTap(e) {
            if(state.energy < 1) return;
            state.energy -= 1; state.bal += 1; state.lastSync = Date.now();
            createFloat(e.clientX, e.clientY);
            refreshUI();
        }

        function autoRefill() {
            if(state.energy < MAX_E) {
                state.energy = Math.min(MAX_E, state.energy + REFILL);
                refreshUI();
            }
        }

        function syncEnergy() {
            let elapsed = (Date.now() - state.lastSync) / 1000;
            state.energy = Math.min(MAX_E, state.energy + (elapsed * REFILL));
        }

        function refreshUI() {
            document.getElementById('bal-txt').innerText = Math.floor(state.bal).toLocaleString();
            document.getElementById('e-txt').innerText = `${Math.floor(state.energy)}/${MAX_E}`;
            document.getElementById('e-fill').style.width = (state.energy/MAX_E*100) + "%";
            localStorage.setItem('k_bal', state.bal);
            localStorage.setItem('k_energy', state.energy);
            localStorage.setItem('k_sync', state.lastSync);
        }

        // --- UTILS ---
        function tab(name, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById('p-' + name).classList.add('active');
            el.classList.add('active');
        }

        function shareLink() {
            const link = `https://t.me/KoalasUsdt_Bot?start=r${state.uid}`;
            const msg = `ðŸ¨ Koala Arcade'e katÄ±l, tÄ±kla ve $KOALA kazan!\n\nðŸš€ GeleceÄŸin en bÃ¼yÃ¼k airdrop'unu kaÃ§Ä±rma!`;
            window.location.href = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent(msg)}`;
        }

        function triggerAd() {
            const v = document.getElementById('ad-view');
            const s = document.getElementById('ad-sec');
            v.style.display = 'flex';
            let t = 10;
            const iv = setInterval(() => {
                t--; s.innerText = t;
                if(t <= 0) { clearInterval(iv); v.style.display = 'none'; state.bal += 1; refreshUI(); alert("+1 $KOALA Claimed!"); }
            }, 1000);
        }

        function openTG() { window.location.href = 'https://t.me/KoalasCommunity'; }

        // --- CHECKING ---
        function startCheck() {
            document.getElementById('btn-check').classList.add('hidden');
            ['s1', 's2'].forEach((id, i) => {
                setTimeout(() => {
                    const el = document.getElementById(id);
                    el.classList.add('show');
                    el.querySelector('.dot').classList.add('done');
                    if(i === 1) setTimeout(finishCheck, 600);
                }, i * 800);
            });
        }
        function finishCheck() {
            document.getElementById('check-list').classList.add('hidden');
            const years = Math.floor(Math.random()*3)+2;
            document.getElementById('veteran-years').innerText = years;
            document.getElementById('welcome-reward').innerText = (years * 10000).toLocaleString();
            document.getElementById('check-result').classList.remove('hidden');
            document.getElementById('btn-claim').classList.remove('hidden');
            if(!state.isClaimed) { state.bal += (years * 10000); state.isClaimed = true; localStorage.setItem('k_clm', 'true'); }
        }
        function enterApp() { document.getElementById('checking-screen').style.display = 'none'; document.getElementById('main-app').classList.remove('hidden'); }

        function createFloat(x, y) {
            const d = document.createElement('div');
            d.className = 'f-text'; d.innerText = '+1';
            d.style.left = x + 'px'; d.style.top = y + 'px';
            document.body.appendChild(d);
            setTimeout(() => d.remove(), 600);
        }

        function saveW() { state.wallet = document.getElementById('w-input').value; localStorage.setItem('k_wallet', state.wallet); checkW(); }
        function checkW() {
            if(state.wallet) {
                document.getElementById('w-setup').classList.add('hidden');
                document.getElementById('w-done').classList.remove('hidden');
                document.getElementById('w-preview').innerText = state.wallet;
            }
        }
        function resetW() { state.wallet = null; localStorage.removeItem('k_wallet'); document.getElementById('w-setup').classList.remove('hidden'); document.getElementById('w-done').classList.add('hidden'); }
    </script>
</body>
</html>
