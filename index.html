<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Instagram Pro Clone</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { width: 100%; height: 100%; background: #fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; overflow: hidden; }

        /* Gƒ∞Rƒ∞≈û EKRANI */
        #loginOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 3000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        #loginOverlay h1 { font-family: 'serif'; font-size: 40px; margin-bottom: 30px; }
        #loginOverlay input { width: 100%; max-width: 270px; padding: 12px; margin: 5px; border: 1px solid #dbdbdb; background: #fafafa; border-radius: 5px; }
        #loginOverlay button { width: 100%; max-width: 270px; padding: 10px; margin-top: 15px; background: #0095f6; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }

        /* ANA YAPI */
        .app-container { display: none; width: 100%; max-width: 500px; margin: 0 auto; height: 100vh; position: relative; background: #fff; }
        .page { display: none; height: calc(100vh - 60px); overflow-y: auto; width: 100%; }
        .active-page { display: block; }

        /* ANA SAYFA (FEED) */
        .post { border-bottom: 1px solid #efefef; padding-bottom: 10px; }
        .post-header { display: flex; align-items: center; padding: 10px; font-weight: 600; font-size: 14px; }
        .avatar { width: 30px; height: 30px; border-radius: 50%; background: #ddd; margin-right: 10px; }
        video { width: 100%; background: #000; }

        /* ARAMA SAYFASI */
        .search-bar { padding: 15px; position: sticky; top: 0; background: #fff; z-index: 10; }
        .search-bar input { width: 100%; padding: 10px; border: 1px solid #dbdbdb; border-radius: 8px; background: #efefef; }
        .user-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #fafafa; }

        /* REELS SAYFASI (TAM EKRAN LOOP) */
        #reelsPage { background: #000; height: calc(100vh - 60px); overflow-y: scroll; scroll-snap-type: y mandatory; }
        .reel-unit { width: 100%; height: 100%; scroll-snap-align: start; position: relative; }
        .reel-unit video { height: 100%; object-fit: cover; }

        /* PROFƒ∞L SAYFASI */
        .profile-header { padding: 20px; border-bottom: 1px solid #dbdbdb; }
        .profile-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .profile-avatar { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); padding: 3px; }
        .profile-avatar img { width: 100%; height: 100%; border-radius: 50%; background: #fff; padding: 2px; }
        .profile-stats { display: flex; gap: 20px; text-align: center; }
        .profile-stats b { display: block; }
        .grid-view { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; padding: 2px; }
        .grid-item { aspect-ratio: 1/1; background: #ddd; }
        .grid-item video { width: 100%; height: 100%; object-fit: cover; }

        /* NAVBAR */
        .navbar { position: absolute; bottom: 0; width: 100%; height: 60px; background: #fff; border-top: 1px solid #dbdbdb; display: flex; justify-content: space-around; align-items: center; }
        .nav-item { font-size: 24px; cursor: pointer; color: #262626; opacity: 0.5; }
        .nav-item.active { opacity: 1; }
    </style>
</head>
<body>

<div id="loginOverlay">
    <h1>Instagram</h1>
    <input type="text" id="usernameInput" placeholder="Kullanƒ±cƒ± Adƒ±">
    <input type="password" placeholder="≈ûifre">
    <button onclick="login()">Giri≈ü Yap</button>
</div>

<div class="app-container" id="app">
    <div id="homePage" class="page active-page">
        <header style="padding: 10px; border-bottom: 1px solid #efefef;"><b>Instagram</b></header>
        <div id="feedContent"></div>
    </div>

    <div id="searchPage" class="page">
        <div class="search-bar"><input type="text" id="userSearch" onkeyup="searchUsers()" placeholder="Kullanƒ±cƒ± ara..."></div>
        <div id="userList"></div>
    </div>

    <div id="reelsPage" class="page"></div>

    <div id="profilePage" class="page">
        <div class="profile-header">
            <div class="profile-top">
                <div class="profile-avatar"><img src="https://via.placeholder.com/150" alt=""></div>
                <div class="profile-stats">
                    <div><b>4</b>Post</div>
                    <div><b>1.2K</b>Takip√ßi</div>
                    <div><b>350</b>Takip</div>
                </div>
            </div>
            <b id="myUsername">Kullanƒ±cƒ±</b>
            <p style="font-size: 14px; color: #666;">Yazƒ±lƒ±m Geli≈ütirici | Reels Master</p>
        </div>
        <div class="grid-view" id="profileGrid"></div>
    </div>

    <nav class="navbar">
        <div class="nav-item active" onclick="showPage('homePage', this)">üè†</div>
        <div class="nav-item" onclick="showPage('searchPage', this)">üîç</div>
        <div class="nav-item">‚ûï</div>
        <div class="nav-item" onclick="showPage('reelsPage', this)">üé¨</div>
        <div class="nav-item" onclick="showPage('profilePage', this)">üë§</div>
    </nav>
</div>

<script>
    const sources = ["reels1.mp4", "reels2.mp4", "reels3.mp4", "reels4.mp4"];
    const usernames = ["ahmet_yilmaz", "mehmet_dev", "ayse_style", "software_pro"];
    let currentUser = "";
    let globalMuted = true;

    function login() {
        currentUser = document.getElementById('usernameInput').value;
        if (currentUser) {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            document.getElementById('myUsername').innerText = currentUser;
            initContent();
        }
    }

    function showPage(pageId, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(pageId).classList.add('active-page');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        if(el) el.classList.add('active');
        
        // Reels sayfasƒ±nda sesleri y√∂net
        if(pageId !== 'reelsPage' && pageId !== 'homePage') {
            document.querySelectorAll('video').forEach(v => v.pause());
        }
    }

    function initContent() {
        // Feed & Profile Grid
        const feed = document.getElementById('feedContent');
        const grid = document.getElementById('profileGrid');
        const reels = document.getElementById('reelsPage');

        sources.forEach((src, i) => {
            // Feed Post
            feed.innerHTML += `
                <div class="post">
                    <div class="post-header"><div class="avatar"></div>${usernames[i]}</div>
                    <video src="${src}" loop muted onclick="toggleSound(this)"></video>
                </div>`;
            
            // Profile Grid
            grid.innerHTML += `<div class="grid-item"><video src="${src}" muted onmouseover="this.play()" onmouseout="this.pause()"></video></div>`;
            
            // Reels Page (Full Loop)
            reels.innerHTML += `<div class="reel-unit"><video src="${src}" loop muted playsinline></video></div>`;
        });

        startObserver();
    }

    function searchUsers() {
        let input = document.getElementById('userSearch').value.toLowerCase();
        let list = document.getElementById('userList');
        list.innerHTML = "";
        if (input.length > 0) {
            usernames.filter(u => u.includes(input)).forEach(u => {
                list.innerHTML += `<div class="user-item"><div class="avatar"></div><b>${u}</b></div>`;
            });
        }
    }

    function toggleSound(v) {
        globalMuted = !globalMuted;
        document.querySelectorAll('video').forEach(vid => vid.muted = globalMuted);
    }

    function startObserver() {
        const obs = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    e.target.muted = globalMuted;
                    e.target.play();
                } else { e.target.pause(); }
            });
        }, { threshold: 0.6 });
        document.querySelectorAll('video').forEach(v => obs.observe(v));
    }

    // Reels i√ßin 2 saniye kuralƒ±
    let isScrolling = false;
    document.getElementById('reelsPage').addEventListener('wheel', (e) => {
        if (isScrolling) e.preventDefault();
        isScrolling = true;
        setTimeout(() => isScrolling = false, 2000);
    }, { passive: false });

</script>
</body>
</html>
